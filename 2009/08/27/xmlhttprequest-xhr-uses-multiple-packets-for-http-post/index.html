<!DOCTYPE html>
<html class="no-js" lang="en-US">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="profile" href="https://gmpg.org/xfn/11"> <meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@josephscott">
<meta name="twitter:site" content="@josephscott">
<meta name="twitter:title" content="XMLHttpRequest (XHR) Uses Multiple Packets for HTTP POST?">
<meta name="twitter:description" content="A recent Think Vitamin article, The Definitive Guide to GET vs POST, mentioned something that I hadn&#039;t seen before about XMLHttpRequest (XHR).  Their Rule #4 states:When using XMLHttpRequest, brows"> <link media="all" href="/wp-content/cache/autoptimize/css/autoptimize_da876478aa27b35cb47c491625986a1f.css" rel="stylesheet">
<link media="print" href="/wp-content/cache/autoptimize/css/autoptimize_4a8bc5d490127fba1e504524cfa205e6.css" rel="stylesheet">
<title>XMLHttpRequest (XHR) Uses Multiple Packets for HTTP POST? &#8211; Joseph Scott</title>
<meta name="robots" content="max-image-preview:large">
<link rel="alternate" type="application/rss+xml" title="Joseph Scott &raquo; Feed" href="/feed/">
<link rel="alternate" type="application/rss+xml" title="Joseph Scott &raquo; Comments Feed" href="/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="Joseph Scott &raquo; XMLHttpRequest (XHR) Uses Multiple Packets for HTTP POST? Comments Feed" href="/2009/08/27/xmlhttprequest-xhr-uses-multiple-packets-for-http-post/feed/">
<style id="twentytwenty-style-inline-css">.color-accent,.color-accent-hover:hover,.color-accent-hover:focus,:root .has-accent-color,.has-drop-cap:not(:focus):first-letter,.wp-block-button.is-style-outline,a { color: #e20842; }blockquote,.border-color-accent,.border-color-accent-hover:hover,.border-color-accent-hover:focus { border-color: #e20842; }button,.button,.faux-button,.wp-block-button__link,.wp-block-file .wp-block-file__button,input[type="button"],input[type="reset"],input[type="submit"],.bg-accent,.bg-accent-hover:hover,.bg-accent-hover:focus,:root .has-accent-background-color,.comment-reply-link { background-color: #e20842; }.fill-children-accent,.fill-children-accent * { fill: #e20842; }:root .has-background-color,button,.button,.faux-button,.wp-block-button__link,.wp-block-file__button,input[type="button"],input[type="reset"],input[type="submit"],.wp-block-button,.comment-reply-link,.has-background.has-primary-background-color:not(.has-text-color),.has-background.has-primary-background-color *:not(.has-text-color),.has-background.has-accent-background-color:not(.has-text-color),.has-background.has-accent-background-color *:not(.has-text-color) { color: #f7f7f7; }:root .has-background-background-color { background-color: #f7f7f7; }body,.entry-title a,:root .has-primary-color { color: #000000; }:root .has-primary-background-color { background-color: #000000; }cite,figcaption,.wp-caption-text,.post-meta,.entry-content .wp-block-archives li,.entry-content .wp-block-categories li,.entry-content .wp-block-latest-posts li,.wp-block-latest-comments__comment-date,.wp-block-latest-posts__post-date,.wp-block-embed figcaption,.wp-block-image figcaption,.wp-block-pullquote cite,.comment-metadata,.comment-respond .comment-notes,.comment-respond .logged-in-as,.pagination .dots,.entry-content hr:not(.has-background),hr.styled-separator,:root .has-secondary-color { color: #686868; }:root .has-secondary-background-color { background-color: #686868; }pre,fieldset,input,textarea,table,table *,hr { border-color: #d3d3d3; }caption,code,code,kbd,samp,.wp-block-table.is-style-stripes tbody tr:nth-child(odd),:root .has-subtle-background-background-color { background-color: #d3d3d3; }.wp-block-table.is-style-stripes { border-bottom-color: #d3d3d3; }.wp-block-latest-posts.is-grid li { border-top-color: #d3d3d3; }:root .has-subtle-background-color { color: #d3d3d3; }body:not(.overlay-header) .primary-menu > li > a,body:not(.overlay-header) .primary-menu > li > .icon,.modal-menu a,.footer-menu a, .footer-widgets a,#site-footer .wp-block-button.is-style-outline,.wp-block-pullquote:before,.singular:not(.overlay-header) .entry-header a,.archive-header a,.header-footer-group .color-accent,.header-footer-group .color-accent-hover:hover { color: #e20842; }.social-icons a,#site-footer button:not(.toggle),#site-footer .button,#site-footer .faux-button,#site-footer .wp-block-button__link,#site-footer .wp-block-file__button,#site-footer input[type="button"],#site-footer input[type="reset"],#site-footer input[type="submit"] { background-color: #e20842; }.social-icons a,body:not(.overlay-header) .primary-menu ul,.header-footer-group button,.header-footer-group .button,.header-footer-group .faux-button,.header-footer-group .wp-block-button:not(.is-style-outline) .wp-block-button__link,.header-footer-group .wp-block-file__button,.header-footer-group input[type="button"],.header-footer-group input[type="reset"],.header-footer-group input[type="submit"] { color: #f7f7f7; }#site-header,.footer-nav-widgets-wrapper,#site-footer,.menu-modal,.menu-modal-inner,.search-modal-inner,.archive-header,.singular .entry-header,.singular .featured-media:before,.wp-block-pullquote:before { background-color: #f7f7f7; }.header-footer-group,body:not(.overlay-header) #site-header .toggle,.menu-modal .toggle { color: #000000; }body:not(.overlay-header) .primary-menu ul { background-color: #000000; }body:not(.overlay-header) .primary-menu > li > ul:after { border-bottom-color: #000000; }body:not(.overlay-header) .primary-menu ul ul:after { border-left-color: #000000; }.site-description,body:not(.overlay-header) .toggle-inner .toggle-text,.widget .post-date,.widget .rss-date,.widget_archive li,.widget_categories li,.widget cite,.widget_pages li,.widget_meta li,.widget_nav_menu li,.powered-by-wordpress,.to-the-top,.singular .entry-header .post-meta,.singular:not(.overlay-header) .entry-header .post-meta a { color: #686868; }.header-footer-group pre,.header-footer-group fieldset,.header-footer-group input,.header-footer-group textarea,.header-footer-group table,.header-footer-group table *,.footer-nav-widgets-wrapper,#site-footer,.menu-modal nav *,.footer-widgets-outer-wrapper,.footer-top { border-color: #d3d3d3; }.header-footer-group table caption,body:not(.overlay-header) .header-inner .toggle-wrapper::before { background-color: #d3d3d3; }.overlay-header .header-inner { color: #f7f7f7; }.cover-header .entry-header * { color: #f7f7f7; }</style>
<link rel="https://api.w.org/" href="/wp-json/">
<link rel="alternate" type="application/json" href="/wp-json/wp/v2/posts/1411">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml">
<meta name="generator" content="WordPress 5.7.2">
<link rel="canonical" href="/2009/08/27/xmlhttprequest-xhr-uses-multiple-packets-for-http-post/">
<link rel="shortlink" href="/?p=1411">
<link rel="alternate" type="application/json+oembed" href="/wp-json/oembed/1.0/embed?url=https%3A%2F%2F%2F2009%2F08%2F27%2Fxmlhttprequest-xhr-uses-multiple-packets-for-http-post%2F">
<link rel="alternate" type="text/xml+oembed" href="/wp-json/oembed/1.0/embed?url=https%3A%2F%2F%2F2009%2F08%2F27%2Fxmlhttprequest-xhr-uses-multiple-packets-for-http-post%2F&#038;format=xml">
<link rel="alternate" type="application/feed+json" title="Joseph Scott &raquo; JSON Feed" href="/feed/json/">
<link rel="alternate" type="application/feed+json" title="Joseph Scott &raquo; XMLHttpRequest (XHR) Uses Multiple Packets for HTTP POST? Comments Feed" href="/2009/08/27/xmlhttprequest-xhr-uses-multiple-packets-for-http-post/feed/json/"> <script>document.documentElement.className = document.documentElement.className.replace( 'no-js', 'js' );</script> <style id="custom-background-css">body.custom-background { background-color: #f7f7f7; }</style>
<style id="wp-custom-css">.powered-by-wordpress { display: none;}

.entry-categories { display: none;}</style>
</head>
<body class="post-template-default single single-post postid-1411 single-format-standard custom-background wp-embed-responsive singular enable-search-modal missing-post-thumbnail has-single-pagination showing-comments show-avatars footer-top-visible reduced-spacing"> <a class="skip-link screen-reader-text" href="#site-content">Skip to the content</a><header id="site-header" class="header-footer-group" role="banner"><div class="header-inner section-inner">
<div class="header-titles-wrapper"> <button class="toggle search-toggle mobile-search-toggle" data-toggle-target=".search-modal" data-toggle-body-class="showing-search-modal" data-set-focus=".search-modal .search-field" aria-expanded="false"> <span class="toggle-inner"> <span class="toggle-icon"> <svg class="svg-icon" aria-hidden="true" role="img" focusable="false" xmlns="http://www.w3.org/2000/svg" width="23" height="23" viewbox="0 0 23 23"><path d="M38.710696,48.0601792 L43,52.3494831 L41.3494831,54 L37.0601792,49.710696 C35.2632422,51.1481185 32.9839107,52.0076499 30.5038249,52.0076499 C24.7027226,52.0076499 20,47.3049272 20,41.5038249 C20,35.7027226 24.7027226,31 30.5038249,31 C36.3049272,31 41.0076499,35.7027226 41.0076499,41.5038249 C41.0076499,43.9839107 40.1481185,46.2632422 38.710696,48.0601792 Z M36.3875844,47.1716785 C37.8030221,45.7026647 38.6734666,43.7048964 38.6734666,41.5038249 C38.6734666,36.9918565 35.0157934,33.3341833 30.5038249,33.3341833 C25.9918565,33.3341833 22.3341833,36.9918565 22.3341833,41.5038249 C22.3341833,46.0157934 25.9918565,49.6734666 30.5038249,49.6734666 C32.7048964,49.6734666 34.7026647,48.8030221 36.1716785,47.3875844 C36.2023931,47.347638 36.2360451,47.3092237 36.2726343,47.2726343 C36.3092237,47.2360451 36.347638,47.2023931 36.3875844,47.1716785 Z" transform="translate(-20 -31)"></path></svg> </span> <span class="toggle-text">Search</span> </span> </button><div class="header-titles"><div class="site-title faux-heading"><a href="/">Joseph Scott</a></div></div> <button class="toggle nav-toggle mobile-nav-toggle" data-toggle-target=".menu-modal" data-toggle-body-class="showing-menu-modal" aria-expanded="false" data-set-focus=".close-nav-toggle"> <span class="toggle-inner"> <span class="toggle-icon"> <svg class="svg-icon" aria-hidden="true" role="img" focusable="false" xmlns="http://www.w3.org/2000/svg" width="26" height="7" viewbox="0 0 26 7"><path fill-rule="evenodd" d="M332.5,45 C330.567003,45 329,43.4329966 329,41.5 C329,39.5670034 330.567003,38 332.5,38 C334.432997,38 336,39.5670034 336,41.5 C336,43.4329966 334.432997,45 332.5,45 Z M342,45 C340.067003,45 338.5,43.4329966 338.5,41.5 C338.5,39.5670034 340.067003,38 342,38 C343.932997,38 345.5,39.5670034 345.5,41.5 C345.5,43.4329966 343.932997,45 342,45 Z M351.5,45 C349.567003,45 348,43.4329966 348,41.5 C348,39.5670034 349.567003,38 351.5,38 C353.432997,38 355,39.5670034 355,41.5 C355,43.4329966 353.432997,45 351.5,45 Z" transform="translate(-329 -38)"></path></svg> </span> <span class="toggle-text">Menu</span> </span> </button>
</div>
<div class="header-navigation-wrapper">
<nav class="primary-menu-wrapper" aria-label="Horizontal" role="navigation"><ul class="primary-menu reset-list-style">
<li id="menu-item-7" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7"><a href="https://josephscott.org/">Home</a></li>
<li id="menu-item-8" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-8"><a href="/">Blog</a></li>
<li id="menu-item-15706" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-15706"><a href="/contact/">Contact</a></li>
</ul></nav><div class="header-toggles hide-no-js"><div class="toggle-wrapper search-toggle-wrapper"> <button class="toggle search-toggle desktop-search-toggle" data-toggle-target=".search-modal" data-toggle-body-class="showing-search-modal" data-set-focus=".search-modal .search-field" aria-expanded="false"> <span class="toggle-inner"> <svg class="svg-icon" aria-hidden="true" role="img" focusable="false" xmlns="http://www.w3.org/2000/svg" width="23" height="23" viewbox="0 0 23 23"><path d="M38.710696,48.0601792 L43,52.3494831 L41.3494831,54 L37.0601792,49.710696 C35.2632422,51.1481185 32.9839107,52.0076499 30.5038249,52.0076499 C24.7027226,52.0076499 20,47.3049272 20,41.5038249 C20,35.7027226 24.7027226,31 30.5038249,31 C36.3049272,31 41.0076499,35.7027226 41.0076499,41.5038249 C41.0076499,43.9839107 40.1481185,46.2632422 38.710696,48.0601792 Z M36.3875844,47.1716785 C37.8030221,45.7026647 38.6734666,43.7048964 38.6734666,41.5038249 C38.6734666,36.9918565 35.0157934,33.3341833 30.5038249,33.3341833 C25.9918565,33.3341833 22.3341833,36.9918565 22.3341833,41.5038249 C22.3341833,46.0157934 25.9918565,49.6734666 30.5038249,49.6734666 C32.7048964,49.6734666 34.7026647,48.8030221 36.1716785,47.3875844 C36.2023931,47.347638 36.2360451,47.3092237 36.2726343,47.2726343 C36.3092237,47.2360451 36.347638,47.2023931 36.3875844,47.1716785 Z" transform="translate(-20 -31)"></path></svg> <span class="toggle-text">Search</span> </span> </button>
</div></div>
</div>
</div>
<div class="search-modal cover-modal header-footer-group" data-modal-target-string=".search-modal"><div class="search-modal-inner modal-inner"><div class="section-inner">
<form role="search" aria-label="Search for:" method="get" class="search-form" action="/"> <label for="search-form-1"> <span class="screen-reader-text">Search for:</span> <input type="search" id="search-form-1" class="search-field" placeholder="Search &hellip;" value="" name="s"> </label> <input type="submit" class="search-submit" value="Search">
</form> <button class="toggle search-untoggle close-search-toggle fill-children-current-color" data-toggle-target=".search-modal" data-toggle-body-class="showing-search-modal" data-set-focus=".search-modal .search-field"> <span class="screen-reader-text">Close search</span> <svg class="svg-icon" aria-hidden="true" role="img" focusable="false" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 16 16"><polygon fill="" fill-rule="evenodd" points="6.852 7.649 .399 1.195 1.445 .149 7.899 6.602 14.352 .149 15.399 1.195 8.945 7.649 15.399 14.102 14.352 15.149 7.899 8.695 1.445 15.149 .399 14.102"></polygon></svg> </button>
</div></div></div></header><div class="menu-modal cover-modal header-footer-group" data-modal-target-string=".menu-modal"><div class="menu-modal-inner modal-inner"><div class="menu-wrapper section-inner">
<div class="menu-top"> <button class="toggle close-nav-toggle fill-children-current-color" data-toggle-target=".menu-modal" data-toggle-body-class="showing-menu-modal" aria-expanded="false" data-set-focus=".menu-modal"> <span class="toggle-text">Close Menu</span> <svg class="svg-icon" aria-hidden="true" role="img" focusable="false" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 16 16"><polygon fill="" fill-rule="evenodd" points="6.852 7.649 .399 1.195 1.445 .149 7.899 6.602 14.352 .149 15.399 1.195 8.945 7.649 15.399 14.102 14.352 15.149 7.899 8.695 1.445 15.149 .399 14.102"></polygon></svg> </button><nav class="mobile-menu" aria-label="Mobile" role="navigation"><ul class="modal-menu reset-list-style">
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7"><div class="ancestor-wrapper"><a href="https://josephscott.org/">Home</a></div></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-8"><div class="ancestor-wrapper"><a href="/">Blog</a></div></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-15706"><div class="ancestor-wrapper"><a href="/contact/">Contact</a></div></li>
</ul></nav>
</div>
<div class="menu-bottom"></div>
</div></div></div>
<main id="site-content" role="main"><article class="post-1411 post type-post status-publish format-standard hentry category-posts tag-firefox tag-http tag-javascript tag-performance tag-xhr" id="post-1411"><header class="entry-header has-text-align-center header-footer-group"><div class="entry-header-inner section-inner medium">
<div class="entry-categories"> <span class="screen-reader-text">Categories</span><div class="entry-categories-inner"> <a href="/category/posts/" rel="category tag">Posts</a>
</div>
</div>
<h1 class="entry-title">XMLHttpRequest (XHR) Uses Multiple Packets for HTTP POST?</h1>
<div class="post-meta-wrapper post-meta-single post-meta-single-top"><ul class="post-meta">
<li class="post-author meta-wrapper"> <span class="meta-icon"> <span class="screen-reader-text">Post author</span> <svg class="svg-icon" aria-hidden="true" role="img" focusable="false" xmlns="http://www.w3.org/2000/svg" width="18" height="20" viewbox="0 0 18 20"><path fill="" d="M18,19 C18,19.5522847 17.5522847,20 17,20 C16.4477153,20 16,19.5522847 16,19 L16,17 C16,15.3431458 14.6568542,14 13,14 L5,14 C3.34314575,14 2,15.3431458 2,17 L2,19 C2,19.5522847 1.55228475,20 1,20 C0.44771525,20 0,19.5522847 0,19 L0,17 C0,14.2385763 2.23857625,12 5,12 L13,12 C15.7614237,12 18,14.2385763 18,17 L18,19 Z M9,10 C6.23857625,10 4,7.76142375 4,5 C4,2.23857625 6.23857625,0 9,0 C11.7614237,0 14,2.23857625 14,5 C14,7.76142375 11.7614237,10 9,10 Z M9,8 C10.6568542,8 12,6.65685425 12,5 C12,3.34314575 10.6568542,2 9,2 C7.34314575,2 6,3.34314575 6,5 C6,6.65685425 7.34314575,8 9,8 Z"></path></svg> </span> <span class="meta-text"> By <a href="/author/josephscott/">josephscott</a> </span>
</li>
<li class="post-date meta-wrapper"> <span class="meta-icon"> <span class="screen-reader-text">Post date</span> <svg class="svg-icon" aria-hidden="true" role="img" focusable="false" xmlns="http://www.w3.org/2000/svg" width="18" height="19" viewbox="0 0 18 19"><path fill="" d="M4.60069444,4.09375 L3.25,4.09375 C2.47334957,4.09375 1.84375,4.72334957 1.84375,5.5 L1.84375,7.26736111 L16.15625,7.26736111 L16.15625,5.5 C16.15625,4.72334957 15.5266504,4.09375 14.75,4.09375 L13.3993056,4.09375 L13.3993056,4.55555556 C13.3993056,5.02154581 13.0215458,5.39930556 12.5555556,5.39930556 C12.0895653,5.39930556 11.7118056,5.02154581 11.7118056,4.55555556 L11.7118056,4.09375 L6.28819444,4.09375 L6.28819444,4.55555556 C6.28819444,5.02154581 5.9104347,5.39930556 5.44444444,5.39930556 C4.97845419,5.39930556 4.60069444,5.02154581 4.60069444,4.55555556 L4.60069444,4.09375 Z M6.28819444,2.40625 L11.7118056,2.40625 L11.7118056,1 C11.7118056,0.534009742 12.0895653,0.15625 12.5555556,0.15625 C13.0215458,0.15625 13.3993056,0.534009742 13.3993056,1 L13.3993056,2.40625 L14.75,2.40625 C16.4586309,2.40625 17.84375,3.79136906 17.84375,5.5 L17.84375,15.875 C17.84375,17.5836309 16.4586309,18.96875 14.75,18.96875 L3.25,18.96875 C1.54136906,18.96875 0.15625,17.5836309 0.15625,15.875 L0.15625,5.5 C0.15625,3.79136906 1.54136906,2.40625 3.25,2.40625 L4.60069444,2.40625 L4.60069444,1 C4.60069444,0.534009742 4.97845419,0.15625 5.44444444,0.15625 C5.9104347,0.15625 6.28819444,0.534009742 6.28819444,1 L6.28819444,2.40625 Z M1.84375,8.95486111 L1.84375,15.875 C1.84375,16.6516504 2.47334957,17.28125 3.25,17.28125 L14.75,17.28125 C15.5266504,17.28125 16.15625,16.6516504 16.15625,15.875 L16.15625,8.95486111 L1.84375,8.95486111 Z"></path></svg> </span> <span class="meta-text"> <a href="/2009/08/27/xmlhttprequest-xhr-uses-multiple-packets-for-http-post/">Thu 27 Aug 2009</a> </span>
</li>
<li class="post-comment-link meta-wrapper"> <span class="meta-icon"> <svg class="svg-icon" aria-hidden="true" role="img" focusable="false" xmlns="http://www.w3.org/2000/svg" width="19" height="19" viewbox="0 0 19 19"><path d="M9.43016863,13.2235931 C9.58624731,13.094699 9.7823475,13.0241935 9.98476849,13.0241935 L15.0564516,13.0241935 C15.8581553,13.0241935 16.5080645,12.3742843 16.5080645,11.5725806 L16.5080645,3.44354839 C16.5080645,2.64184472 15.8581553,1.99193548 15.0564516,1.99193548 L3.44354839,1.99193548 C2.64184472,1.99193548 1.99193548,2.64184472 1.99193548,3.44354839 L1.99193548,11.5725806 C1.99193548,12.3742843 2.64184472,13.0241935 3.44354839,13.0241935 L5.76612903,13.0241935 C6.24715123,13.0241935 6.63709677,13.4141391 6.63709677,13.8951613 L6.63709677,15.5301903 L9.43016863,13.2235931 Z M3.44354839,14.766129 C1.67980032,14.766129 0.25,13.3363287 0.25,11.5725806 L0.25,3.44354839 C0.25,1.67980032 1.67980032,0.25 3.44354839,0.25 L15.0564516,0.25 C16.8201997,0.25 18.25,1.67980032 18.25,3.44354839 L18.25,11.5725806 C18.25,13.3363287 16.8201997,14.766129 15.0564516,14.766129 L10.2979143,14.766129 L6.32072889,18.0506004 C5.75274472,18.5196577 4.89516129,18.1156602 4.89516129,17.3790323 L4.89516129,14.766129 L3.44354839,14.766129 Z"></path></svg> </span> <span class="meta-text"> <a href="/2009/08/27/xmlhttprequest-xhr-uses-multiple-packets-for-http-post/#comments">27 Comments<span class="screen-reader-text"> on XMLHttpRequest (XHR) Uses Multiple Packets for HTTP POST?</span></a> </span>
</li>
</ul></div>
</div></header><div class="post-inner thin "><div class="entry-content">
<p>A recent Think Vitamin article, <a href="http://carsonified.com/blog/dev/the-definitive-guide-to-get-vs-post/">The Definitive Guide to GET vs POST</a>, mentioned something that I hadn&#8217;t seen before about XMLHttpRequest (XHR). Their Rule #4 states:</p>
<blockquote><p> When using XMLHttpRequest, browsers implement POST as a two-step process (sending the headers first and then the data). This means that GET requests are more responsive – something you need in AJAX environments.</p></blockquote>
<p>The claim is that even the smallest XHR will be sent using two packets if the request is done over HTTP POST instead of HTTP GET. I don&#8217;t remember ever having heard this claim before.</p>
<p>Let me first say that performance issues for POST vs. GET probably shouldn&#8217;t be your top factor for deciding which one to use. Make sure that you understand the implications of each and pick the right method for your request. For most people I suspect the biggest factor will involve caching, not performance. I was going to leave a comment on the article about this, but <a href="http://carsonified.com/blog/dev/the-definitive-guide-to-get-vs-post/#comment-13698">Simon beat me to it</a>.</p>
<p>I wasn&#8217;t the only one who wanted to find out more about XHR POST using multiple packets. Fortunately someone else already <a href="http://carsonified.com/blog/dev/the-definitive-guide-to-get-vs-post/#comment-13556">asked that question</a> and the author <a href="http://carsonified.com/blog/dev/the-definitive-guide-to-get-vs-post/#comment-13569">replied</a>:</p>
<blockquote>
<p> 2. My claim is based on research done by Iain Lamb, cofounder of the Oddpost webmail startup that was acquired by Yahoo! and eventually became the basis for the all-new Yahoo! Mail.</p>
<p>His research showed “rather baffling finding: POST requests, made via the XMLHTTP object, send header and body data in separate tcp/ip packets [and therefore,] xmlhttp GET performs better when sending small amounts of data than an xmlhttp POST.”</p>
<p>That is why Yahoo includes the use of GET instead of POST as one of their high performance speed optimisation rules.</p>
</blockquote>
<p>Simon Willison did some looking around and <a href="http://simonwillison.net/2009/Aug/18/performance/#comments">found more links for this</a>. It was mentioned <a href="https://developer.yahoo.com/performance/rules.html">here</a> and <a href="http://yuiblog.com/blog/2007/03/01/performance-research-part-3/#comment-59531">here</a>, so it looks like <a href="http://lamb.cc/">Iain Lamb</a> did do this research, even though I couldn&#8217;t find a first person account of it. This was enough information to make me curious, but not enough to answer all of my questions. It was time to run some tests of my own.</p>
<p>So I updated my install of <a href="https://www.wireshark.org/">Wireshark</a> on Windows XP, turned off all of the packet reassembly options for HTTP decoding and started testing browsers. My very simple XHR POST test page looked like this:</p>
<p>[sourcecode lang=&#8221;html&#8221;]<br> &lt;button type=&quot;button&quot; onclick=&quot;$.post(&#8216;hello.txt&#8217;, {name: &#8216;Joseph&#8217;})&quot;&gt;XHR POST&lt;/button&gt;<br> &lt;script src=&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js&quot;&gt;&lt;/script&gt;<br> [/sourcecode]</p>
<p>When the button is clicked an XHR POST request is made to hello.txt with the name=Joseph for a tiny amount of data. The domain I tested on sent along some cookies as well, but still left enough room for the tiny POST payload to fit in a single TCP packet.</p>
<p>Here are the results of the tests that I ran:</p>
<ul>
<li>IE 6 &#8211; 2 packets</li>
<li>IE 7 &#8211; 2 packets</li>
<li>IE 8 &#8211; 2 packets</li>
<li><b>Firefox 3.0.13 &#8211; 1 packet</b></li>
<li><b>Firefox 3.5.2 &#8211; 1 packet</b></li>
<li>Opera 9.27 &#8211; 2 packets</li>
<li>Safari 4.0.3 &#8211; 2 packets</li>
<li>Chrome 2.0.172.43 &#8211; 2 packets</li>
</ul>
<p>The short version of this is pretty easy to see, all of the browsers except for Firefox will use at least 2 packets for an XHR done over HTTP POST. When I saw that Safari sent 2 packets I figured that Chrome would as well, but I tested it anyway just to make sure.</p>
<p>I looked at the data size of each packet in IE 6; the first packet had 575 bytes of data and the second packet had 11 bytes of data. This lined up with the POST request which indicated that the content length was 11 bytes. The second packet consisted only of the POST data. Because Firefox sent less data in the user-agent string I increased the POST data so that it would exceed the combined total of the two IE packets to make sure I wasn&#8217;t running into any odd packet fragmentation. The second packet in Opera, Safari and Chrome was also only the 11 bytes of POST data.</p>
<p>If this were <a href="http://dsc.discovery.com/fansites/mythbusters/mythbusters.html">Myth Busters</a> I&#8217;d call this myth confirmed. While it is true that not ALL browsers will always use two packets, it appears that the two packet process is the rule, not the exception. And with <a href="http://gs.statcounter.com/#browser-ww-monthly-200807-200908">IE still the most widely used browser</a> it&#8217;s very likely that a large portion of your users fall into the two packet category. If on the other hand 95% of your users happen to be using Firefox, then sure, you can skip thinking about this.</p>
</div></div>
<div class="section-inner"><div class="post-meta-wrapper post-meta-single post-meta-single-bottom"><ul class="post-meta"><li class="post-tags meta-wrapper"> <span class="meta-icon"> <span class="screen-reader-text">Tags</span> <svg class="svg-icon" aria-hidden="true" role="img" focusable="false" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewbox="0 0 18 18"><path fill="" d="M15.4496399,8.42490555 L8.66109799,1.63636364 L1.63636364,1.63636364 L1.63636364,8.66081885 L8.42522727,15.44178 C8.57869221,15.5954158 8.78693789,15.6817418 9.00409091,15.6817418 C9.22124393,15.6817418 9.42948961,15.5954158 9.58327627,15.4414581 L15.4486339,9.57610048 C15.7651495,9.25692435 15.7649133,8.74206554 15.4496399,8.42490555 Z M16.6084423,10.7304545 L10.7406818,16.59822 C10.280287,17.0591273 9.65554997,17.3181054 9.00409091,17.3181054 C8.35263185,17.3181054 7.72789481,17.0591273 7.26815877,16.5988788 L0.239976954,9.57887876 C0.0863319284,9.4254126 0,9.21716044 0,9 L0,0.818181818 C0,0.366312477 0.366312477,0 0.818181818,0 L9,0 C9.21699531,0 9.42510306,0.0862010512 9.57854191,0.239639906 L16.6084423,7.26954545 C17.5601275,8.22691012 17.5601275,9.77308988 16.6084423,10.7304545 Z M5,6 C4.44771525,6 4,5.55228475 4,5 C4,4.44771525 4.44771525,4 5,4 C5.55228475,4 6,4.44771525 6,5 C6,5.55228475 5.55228475,6 5,6 Z"></path></svg> </span> <span class="meta-text"> <a href="/tag/firefox/" rel="tag">firefox</a>, <a href="/tag/http/" rel="tag">http</a>, <a href="/tag/javascript/" rel="tag">javascript</a>, <a href="/tag/performance/" rel="tag">performance</a>, <a href="/tag/xhr/" rel="tag">xhr</a> </span>
</li></ul></div></div>
<nav class="pagination-single section-inner" aria-label="Post" role="navigation"><hr class="styled-separator is-style-wide" aria-hidden="true">
<div class="pagination-single-inner"> <a class="previous-post" href="/2009/08/26/my-welfare-responsibilities/"> <span class="arrow" aria-hidden="true">&larr;</span> <span class="title"><span class="title-inner">My Welfare Responsibilities</span></span> </a> <a class="next-post" href="/2009/09/03/showing-your-last-tweet-with-javascript/"> <span class="arrow" aria-hidden="true">&rarr;</span> <span class="title"><span class="title-inner">Showing Your Last Tweet With Javascript</span></span> </a>
</div>
<hr class="styled-separator is-style-wide" aria-hidden="true"></nav><div class="comments-wrapper section-inner">
<div class="comments" id="comments">
<div class="comments-header section-inner small max-percentage"><h2 class="comment-reply-title"> 27 replies on &ldquo;XMLHttpRequest (XHR) Uses Multiple Packets for HTTP POST?&rdquo;</h2></div>
<div class="comments-inner section-inner thin max-percentage">
<div id="comment-3008" class="comment even thread-even depth-1"><article id="div-comment-3008" class="comment-body"><footer class="comment-meta"><div class="comment-author vcard"> <a href="http://ocaoimh.ie/" rel="external nofollow" class="url"><img id="grav-93b8620ac1addc4d09301250184fc7d8-120-60d16b4fe25fe" alt="Donncha" src="/wp-content/uploads/gravatar-cache/93b8620ac1addc4d09301250184fc7d8-120.jpg" class="avatar avatar-120 photo" height="120" width="120" loading="lazy"><span class="fn">Donncha</span><span class="screen-reader-text says">says:</span></a>
</div>
<div class="comment-metadata"> <a href="/2009/08/27/xmlhttprequest-xhr-uses-multiple-packets-for-http-post/#comment-3008"><time datetime="2009-08-27T09:08:46-06:00" title="Thu 27 Aug 2009 at 9:08 am">Thu 27 Aug 2009 at 9:08 am</time></a>
</div></footer><div class="comment-content entry-content">
<p>That&#8217;s pretty hardcore stuff there.</p>
<p>Next thing someone&#8217;s going to look at writing a browser that uses UDP to send 403 requests 🙂</p>
</div></article></div>
<div id="comment-3009" class="comment odd alt thread-odd thread-alt depth-1"><article id="div-comment-3009" class="comment-body"><footer class="comment-meta"><div class="comment-author vcard"> <a href="http://josephscott.org/" rel="external nofollow" class="url"><img id="grav-582b66ad5ae1b69c7601a990cb9a661a-120-60d16b4fe2ea9" alt="Joseph Scott" src="/wp-content/uploads/gravatar-cache/582b66ad5ae1b69c7601a990cb9a661a-120.jpg" class="avatar avatar-120 photo" height="120" width="120" loading="lazy"><span class="fn">Joseph Scott</span><span class="screen-reader-text says">says:</span></a>
</div>
<div class="comment-metadata"> <a href="/2009/08/27/xmlhttprequest-xhr-uses-multiple-packets-for-http-post/#comment-3009"><time datetime="2009-08-27T09:13:13-06:00" title="Thu 27 Aug 2009 at 9:13 am">Thu 27 Aug 2009 at 9:13 am</time></a>
</div></footer><div class="comment-content entry-content"><p>Just one of those tiny little goofy things that browsers do. I don&#8217;t expect to be worrying about it too much 🙂</p></div></article></div>
<div id="comment-3010" class="comment even thread-even depth-1"><article id="div-comment-3010" class="comment-body"><footer class="comment-meta"><div class="comment-author vcard"> <a href="http://blog.ftwr.co.uk/" rel="external nofollow" class="url"><img id="grav-5b3b5ce04dd402124aba53142b3e47f6-120-60d16b4fe3a0c" alt="westi" src="/wp-content/uploads/gravatar-cache/5b3b5ce04dd402124aba53142b3e47f6-120.jpg" class="avatar avatar-120 photo" height="120" width="120" loading="lazy"><span class="fn">westi</span><span class="screen-reader-text says">says:</span></a>
</div>
<div class="comment-metadata"> <a href="/2009/08/27/xmlhttprequest-xhr-uses-multiple-packets-for-http-post/#comment-3010"><time datetime="2009-08-27T10:05:26-06:00" title="Thu 27 Aug 2009 at 10:05 am">Thu 27 Aug 2009 at 10:05 am</time></a>
</div></footer><div class="comment-content entry-content">
<p>I suspect this is a case of premature optimisation.</p>
<p>The browser implementer probably decided that as POST requests will likely have a large body and the server will need all of that data before it processes the request that it is better to try and send it all in a single TCP packet.</p>
<p>It also allows for the server to do all the processing it might want to do on the header before the POST data arrives too.</p>
<p>But it should really only trigger for large amounts of POST data 🙂</p>
</div></article></div>
<div id="comment-3011" class="comment odd alt thread-odd thread-alt depth-1"><article id="div-comment-3011" class="comment-body"><footer class="comment-meta"><div class="comment-author vcard"> <a href="http://josephscott.org/" rel="external nofollow" class="url"><img id="grav-582b66ad5ae1b69c7601a990cb9a661a-120-60d16b4fe4203" alt="Joseph Scott" src="/wp-content/uploads/gravatar-cache/582b66ad5ae1b69c7601a990cb9a661a-120.jpg" class="avatar avatar-120 photo" height="120" width="120" loading="lazy"><span class="fn">Joseph Scott</span><span class="screen-reader-text says">says:</span></a>
</div>
<div class="comment-metadata"> <a href="/2009/08/27/xmlhttprequest-xhr-uses-multiple-packets-for-http-post/#comment-3011"><time datetime="2009-08-27T10:12:58-06:00" title="Thu 27 Aug 2009 at 10:12 am">Thu 27 Aug 2009 at 10:12 am</time></a>
</div></footer><div class="comment-content entry-content"><p>That sounds like a reasonable explanation. If that is the case, I wonder if they have any similar optimizations for large GET requests?</p></div></article></div>
<div id="comment-3012" class="comment even thread-even depth-1"><article id="div-comment-3012" class="comment-body"><footer class="comment-meta"><div class="comment-author vcard"> <img id="grav-8fc211d3bc6bacd61fa0539129c7f307-120-60d16b4fe9e40" alt="Fahed" src="/wp-content/uploads/gravatar-cache/8fc211d3bc6bacd61fa0539129c7f307-120.jpg" class="avatar avatar-120 photo" height="120" width="120" loading="lazy"><span class="fn">Fahed</span><span class="screen-reader-text says">says:</span>
</div>
<div class="comment-metadata"> <a href="/2009/08/27/xmlhttprequest-xhr-uses-multiple-packets-for-http-post/#comment-3012"><time datetime="2009-08-31T05:52:24-06:00" title="Mon 31 Aug 2009 at 5:52 am">Mon 31 Aug 2009 at 5:52 am</time></a>
</div></footer><div class="comment-content entry-content">
<p>Thanks for taking the time to run the tests.</p>
<p>I had scheduled them into my timetable, but never got around to it as I&#8217;m so busy. Will point here next time?</p>
</div></article></div>
<div id="comment-3013" class="comment odd alt thread-odd thread-alt depth-1"><article id="div-comment-3013" class="comment-body"><footer class="comment-meta"><div class="comment-author vcard"> <img id="grav-8fc211d3bc6bacd61fa0539129c7f307-120-60d16b4feefda" alt="Fahed" src="/wp-content/uploads/gravatar-cache/8fc211d3bc6bacd61fa0539129c7f307-120.jpg" class="avatar avatar-120 photo" height="120" width="120" loading="lazy"><span class="fn">Fahed</span><span class="screen-reader-text says">says:</span>
</div>
<div class="comment-metadata"> <a href="/2009/08/27/xmlhttprequest-xhr-uses-multiple-packets-for-http-post/#comment-3013"><time datetime="2009-08-31T05:54:04-06:00" title="Mon 31 Aug 2009 at 5:54 am">Mon 31 Aug 2009 at 5:54 am</time></a>
</div></footer><div class="comment-content entry-content">
<p>Another link to add to the ones you mentioned is:</p>
<p><a href="http://yuiblog.com/blog/2007/03/01/performance-research-part-3/#comment-59531" rel="nofollow ugc">http://yuiblog.com/blog/2007/03/01/performance-research-part-3/#comment-59531</a></p>
</div></article></div>
<div id="comment-3014" class="comment even thread-even depth-1"><article id="div-comment-3014" class="comment-body"><footer class="comment-meta"><div class="comment-author vcard"> <a href="http://josephscott.org/" rel="external nofollow" class="url"><img id="grav-582b66ad5ae1b69c7601a990cb9a661a-120-60d16b4fef874" alt="Joseph Scott" src="/wp-content/uploads/gravatar-cache/582b66ad5ae1b69c7601a990cb9a661a-120.jpg" class="avatar avatar-120 photo" height="120" width="120" loading="lazy"><span class="fn">Joseph Scott</span><span class="screen-reader-text says">says:</span></a>
</div>
<div class="comment-metadata"> <a href="/2009/08/27/xmlhttprequest-xhr-uses-multiple-packets-for-http-post/#comment-3014"><time datetime="2009-08-31T18:43:31-06:00" title="Mon 31 Aug 2009 at 6:43 pm">Mon 31 Aug 2009 at 6:43 pm</time></a>
</div></footer><div class="comment-content entry-content"><p>No problem. I thought it such an odd thing that I wanted to see them for myself. I think westi is right, this was probably done as optimization with the thought that most POST requests wouldn&#8217;t fit in a single packet anyway.</p></div></article></div>
<div id="comment-3015" class="comment odd alt thread-odd thread-alt depth-1"><article id="div-comment-3015" class="comment-body"><footer class="comment-meta"><div class="comment-author vcard"> <a href="http://josephscott.org/" rel="external nofollow" class="url"><img id="grav-582b66ad5ae1b69c7601a990cb9a661a-120-60d16b4ff01ac" alt="Joseph Scott" src="/wp-content/uploads/gravatar-cache/582b66ad5ae1b69c7601a990cb9a661a-120.jpg" class="avatar avatar-120 photo" height="120" width="120" loading="lazy"><span class="fn">Joseph Scott</span><span class="screen-reader-text says">says:</span></a>
</div>
<div class="comment-metadata"> <a href="/2009/08/27/xmlhttprequest-xhr-uses-multiple-packets-for-http-post/#comment-3015"><time datetime="2009-08-31T18:44:16-06:00" title="Mon 31 Aug 2009 at 6:44 pm">Mon 31 Aug 2009 at 6:44 pm</time></a>
</div></footer><div class="comment-content entry-content"><p>Yes, my post has a link to that. It&#8217;s one of the two links I reference that Simon Willison dug up.</p></div></article></div>
<div id="comment-3018" class="pingback even thread-even depth-1"><article id="div-comment-3018" class="comment-body"><footer class="comment-meta"><div class="comment-author vcard"> <a href="http://yahoosummary.com/an-engineers-guide-to-bandwidth/" rel="external nofollow" class="url"><span class="fn">Yahoo Summary &raquo; An Engineer&#8217;s Guide to Bandwidth</span><span class="screen-reader-text says">says:</span></a>
</div>
<div class="comment-metadata"> <a href="/2009/08/27/xmlhttprequest-xhr-uses-multiple-packets-for-http-post/#comment-3018"><time datetime="2009-10-01T09:23:59-06:00" title="Thu 1 Oct 2009 at 9:23 am">Thu 1 Oct 2009 at 9:23 am</time></a>
</div></footer><div class="comment-content entry-content"><p>[&#8230;] Add in the actual URL, Referer header, query parameters&#8230; and you&#039;re dead. There is also the little-known fact that browsers split certain POST requests into at least two packets regardless of the size of the [&#8230;]</p></div></article></div>
<div id="comment-3019" class="comment odd alt thread-odd thread-alt depth-1"><article id="div-comment-3019" class="comment-body"><footer class="comment-meta"><div class="comment-author vcard"> <img id="grav-8fc211d3bc6bacd61fa0539129c7f307-120-60d16b5001e52" alt="AlwaysLearning" src="/wp-content/uploads/gravatar-cache/8fc211d3bc6bacd61fa0539129c7f307-120.jpg" class="avatar avatar-120 photo" height="120" width="120" loading="lazy"><span class="fn">AlwaysLearning</span><span class="screen-reader-text says">says:</span>
</div>
<div class="comment-metadata"> <a href="/2009/08/27/xmlhttprequest-xhr-uses-multiple-packets-for-http-post/#comment-3019"><time datetime="2009-10-01T16:29:02-06:00" title="Thu 1 Oct 2009 at 4:29 pm">Thu 1 Oct 2009 at 4:29 pm</time></a>
</div></footer><div class="comment-content entry-content">
<p>I would have expected a (minimum) 2 packet POST to be the norm.</p>
<p>RFC2616 HTTP/1.1 introduces the &#8220;Expect: 100-continue&#8221; mechanism which is meant to be used for POSTs, where the client sends the HTTP request headers first including &#8220;Expect: 100-continue&#8221; and then waits for the server (so it can setup whatever resources it needs to handle the POST body) to send either a 100 (Continue) or 417 (Expectation Failed) response before sending the POST body.</p>
<p>Out of curiosity: when you tested Firefox were you using a proxy server? It&#8217;s likely that Firefox was sending a HTTP/1.0 request through the proxy, as a single packet (single HTTP/1.0 didn&#8217;t define Expect: 100-continue headers), as I don&#8217;t think Firefox sends HTTP/1.1 through proxies by default.</p>
</div></article></div>
<div id="comment-3020" class="comment even thread-even depth-1"><article id="div-comment-3020" class="comment-body"><footer class="comment-meta"><div class="comment-author vcard"> <a href="http://josephscott.org/" rel="external nofollow" class="url"><img id="grav-582b66ad5ae1b69c7601a990cb9a661a-120-60d16b5002538" alt="Joseph Scott" src="/wp-content/uploads/gravatar-cache/582b66ad5ae1b69c7601a990cb9a661a-120.jpg" class="avatar avatar-120 photo" height="120" width="120" loading="lazy"><span class="fn">Joseph Scott</span><span class="screen-reader-text says">says:</span></a>
</div>
<div class="comment-metadata"> <a href="/2009/08/27/xmlhttprequest-xhr-uses-multiple-packets-for-http-post/#comment-3020"><time datetime="2009-10-01T16:33:26-06:00" title="Thu 1 Oct 2009 at 4:33 pm">Thu 1 Oct 2009 at 4:33 pm</time></a>
</div></footer><div class="comment-content entry-content"><p>No proxy, just Wireshark to watch the network traffic.</p></div></article></div>
<div id="comment-3021" class="comment odd alt thread-odd thread-alt depth-1"><article id="div-comment-3021" class="comment-body"><footer class="comment-meta"><div class="comment-author vcard"> <img id="grav-8fc211d3bc6bacd61fa0539129c7f307-120-60d16b5007083" alt="AlwaysLearning" src="/wp-content/uploads/gravatar-cache/8fc211d3bc6bacd61fa0539129c7f307-120.jpg" class="avatar avatar-120 photo" height="120" width="120" loading="lazy"><span class="fn">AlwaysLearning</span><span class="screen-reader-text says">says:</span>
</div>
<div class="comment-metadata"> <a href="/2009/08/27/xmlhttprequest-xhr-uses-multiple-packets-for-http-post/#comment-3021"><time datetime="2009-10-01T16:48:53-06:00" title="Thu 1 Oct 2009 at 4:48 pm">Thu 1 Oct 2009 at 4:48 pm</time></a>
</div></footer><div class="comment-content entry-content"><p>Another possibility&#8230; does your Firefox config have network.http.pipelining and/or network.http.proxy.pipelining options set to true? If so, try setting them to false and repeating your tests.</p></div></article></div>
<div id="comment-3022" class="comment even thread-even depth-1"><article id="div-comment-3022" class="comment-body"><footer class="comment-meta"><div class="comment-author vcard"> <a href="http://josephscott.org/" rel="external nofollow" class="url"><img id="grav-582b66ad5ae1b69c7601a990cb9a661a-120-60d16b50077ad" alt="Joseph Scott" src="/wp-content/uploads/gravatar-cache/582b66ad5ae1b69c7601a990cb9a661a-120.jpg" class="avatar avatar-120 photo" height="120" width="120" loading="lazy"><span class="fn">Joseph Scott</span><span class="screen-reader-text says">says:</span></a>
</div>
<div class="comment-metadata"> <a href="/2009/08/27/xmlhttprequest-xhr-uses-multiple-packets-for-http-post/#comment-3022"><time datetime="2009-10-02T09:33:49-06:00" title="Fri 2 Oct 2009 at 9:33 am">Fri 2 Oct 2009 at 9:33 am</time></a>
</div></footer><div class="comment-content entry-content"><p>Both network.http.pipelining and network.http.proxy.pipelining (though I did not use a proxy) are set to false. For the most part the Firefox installs are fairly stock, with just a couple of plugins installed.</p></div></article></div>
<div id="comment-3023" class="comment odd alt thread-odd thread-alt depth-1"><article id="div-comment-3023" class="comment-body"><footer class="comment-meta"><div class="comment-author vcard"> <img id="grav-3aa92a85cbc012ebc2736a288a8d5706-120-60d16b50082b8" alt="Matt Chatterley" src="/wp-content/uploads/gravatar-cache/3aa92a85cbc012ebc2736a288a8d5706-120.jpg" class="avatar avatar-120 photo" height="120" width="120" loading="lazy"><span class="fn">Matt Chatterley</span><span class="screen-reader-text says">says:</span>
</div>
<div class="comment-metadata"> <a href="/2009/08/27/xmlhttprequest-xhr-uses-multiple-packets-for-http-post/#comment-3023"><time datetime="2009-10-04T01:57:18-06:00" title="Sun 4 Oct 2009 at 1:57 am">Sun 4 Oct 2009 at 1:57 am</time></a>
</div></footer><div class="comment-content entry-content">
<p>Thanks for taking the time out to test this &#8211; it&#8217;s an interesting fact, albeit perhaps not a hugely important one.</p>
<p>If you&#8217;re using XHR to replace conventional postbacks, the odds are that you will be sending a lot less post-data, because you&#8217;ll be doing fragmented transactions (however you want to call them) &#8211; so it&#8217;s probably a net gain overall in most situations!</p>
</div></article></div>
<div id="comment-3024" class="comment even thread-even depth-1"><article id="div-comment-3024" class="comment-body"><footer class="comment-meta"><div class="comment-author vcard"> <a href="http://josephscott.org/" rel="external nofollow" class="url"><img id="grav-582b66ad5ae1b69c7601a990cb9a661a-120-60d16b50089e1" alt="Joseph Scott" src="/wp-content/uploads/gravatar-cache/582b66ad5ae1b69c7601a990cb9a661a-120.jpg" class="avatar avatar-120 photo" height="120" width="120" loading="lazy"><span class="fn">Joseph Scott</span><span class="screen-reader-text says">says:</span></a>
</div>
<div class="comment-metadata"> <a href="/2009/08/27/xmlhttprequest-xhr-uses-multiple-packets-for-http-post/#comment-3024"><time datetime="2009-10-05T09:00:00-06:00" title="Mon 5 Oct 2009 at 9:00 am">Mon 5 Oct 2009 at 9:00 am</time></a>
</div></footer><div class="comment-content entry-content"><p>Determining if this is hugely important depends on what you are using the XHRs for. For basic things like submitting a form without reloading the page, sure, not a big deal. If you have a web app that is doing lots of updates (chat, live stream, etc.) then it could become enormously important.</p></div></article></div>
<div id="comment-3025" class="pingback odd alt thread-odd thread-alt depth-1"><article id="div-comment-3025" class="comment-body"><footer class="comment-meta"><div class="comment-author vcard"> <a href="http://jimmyli.net/2009/10/guide-to-bandwidth-in-packets/" rel="external nofollow" class="url"><span class="fn">JimmyLi.net &raquo; Guide to Bandwidth in packets</span><span class="screen-reader-text says">says:</span></a>
</div>
<div class="comment-metadata"> <a href="/2009/08/27/xmlhttprequest-xhr-uses-multiple-packets-for-http-post/#comment-3025"><time datetime="2009-10-18T19:56:15-06:00" title="Sun 18 Oct 2009 at 7:56 pm">Sun 18 Oct 2009 at 7:56 pm</time></a>
</div></footer><div class="comment-content entry-content"><p>[&#8230;] blog article also has an interesting link to another interesting article measuring that XMLHttpRequest uses 2 packets to send POST data (for most browsers).  You should [&#8230;]</p></div></article></div>
<div id="comment-3026" class="comment even thread-even depth-1"><article id="div-comment-3026" class="comment-body"><footer class="comment-meta"><div class="comment-author vcard"> <img id="grav-8fc211d3bc6bacd61fa0539129c7f307-120-60d16b5010cd2" alt="chandru" src="/wp-content/uploads/gravatar-cache/8fc211d3bc6bacd61fa0539129c7f307-120.jpg" class="avatar avatar-120 photo" height="120" width="120" loading="lazy"><span class="fn">chandru</span><span class="screen-reader-text says">says:</span>
</div>
<div class="comment-metadata"> <a href="/2009/08/27/xmlhttprequest-xhr-uses-multiple-packets-for-http-post/#comment-3026"><time datetime="2009-11-13T08:44:15-07:00" title="Fri 13 Nov 2009 at 8:44 am">Fri 13 Nov 2009 at 8:44 am</time></a>
</div></footer><div class="comment-content entry-content">
<p>Hi, First of all thank you very much for such a good article. Do you have any idea on what happens if second packet gets lost in the post operation? I am running out of one problem just trying to correlate my problem with this article.</p>
<p>Thanks &amp; regards,<br> chandru</p>
</div></article></div>
<div id="comment-3027" class="comment odd alt thread-odd thread-alt depth-1"><article id="div-comment-3027" class="comment-body"><footer class="comment-meta"><div class="comment-author vcard"> <a href="http://josephscott.org/" rel="external nofollow" class="url"><img id="grav-582b66ad5ae1b69c7601a990cb9a661a-120-60d16b5011497" alt="Joseph Scott" src="/wp-content/uploads/gravatar-cache/582b66ad5ae1b69c7601a990cb9a661a-120.jpg" class="avatar avatar-120 photo" height="120" width="120" loading="lazy"><span class="fn">Joseph Scott</span><span class="screen-reader-text says">says:</span></a>
</div>
<div class="comment-metadata"> <a href="/2009/08/27/xmlhttprequest-xhr-uses-multiple-packets-for-http-post/#comment-3027"><time datetime="2009-11-16T09:36:48-07:00" title="Mon 16 Nov 2009 at 9:36 am">Mon 16 Nov 2009 at 9:36 am</time></a>
</div></footer><div class="comment-content entry-content"><p>It&#8217;s over TCP so any lost packets would be resent by the networking layer, below the browser.</p></div></article></div>
<div id="comment-3028" class="comment even thread-even depth-1"><article id="div-comment-3028" class="comment-body"><footer class="comment-meta"><div class="comment-author vcard"> <img id="grav-dfab01f67ca4d6dd3b3a739f9770f12f-120-60d16b50128c7" alt="Maurits" src="/wp-content/uploads/gravatar-cache/dfab01f67ca4d6dd3b3a739f9770f12f-120.jpg" class="avatar avatar-120 photo" height="120" width="120" loading="lazy"><span class="fn">Maurits</span><span class="screen-reader-text says">says:</span>
</div>
<div class="comment-metadata"> <a href="/2009/08/27/xmlhttprequest-xhr-uses-multiple-packets-for-http-post/#comment-3028"><time datetime="2010-01-19T05:57:46-07:00" title="Tue 19 Jan 2010 at 5:57 am">Tue 19 Jan 2010 at 5:57 am</time></a>
</div></footer><div class="comment-content entry-content"><p>Thank you very much! We have such a web app that is doing lots of updates and to us this is enormously important. After doing some wiresharking and emulating some loss, jitter, low bandwidth and reordering (using tc) and reading your post I decided to change all the ajax post requests to ajax get requests hoping it had something to do with the 2 packet issue. And it did: after that no more strange 404&#8217;s on the ajax calls appeared in the apache access log. I still didn&#8217;t figure out why exactly, but emulating these conditions is no easy task either, so I may never find out.</p></div></article></div>
<div id="comment-3029" class="comment odd alt thread-odd thread-alt depth-1"><article id="div-comment-3029" class="comment-body"><footer class="comment-meta"><div class="comment-author vcard"> <a href="http://josephscott.org/" rel="external nofollow" class="url"><img id="grav-582b66ad5ae1b69c7601a990cb9a661a-120-60d16b5013ed9" alt="Joseph Scott" src="/wp-content/uploads/gravatar-cache/582b66ad5ae1b69c7601a990cb9a661a-120.jpg" class="avatar avatar-120 photo" height="120" width="120" loading="lazy"><span class="fn">Joseph Scott</span><span class="screen-reader-text says">says:</span></a>
</div>
<div class="comment-metadata"> <a href="/2009/08/27/xmlhttprequest-xhr-uses-multiple-packets-for-http-post/#comment-3029"><time datetime="2010-01-19T07:11:22-07:00" title="Tue 19 Jan 2010 at 7:11 am">Tue 19 Jan 2010 at 7:11 am</time></a>
</div></footer><div class="comment-content entry-content"><p>Nice, glad it helped.</p></div></article></div>
<div id="comment-3030" class="pingback even thread-even depth-1"><article id="div-comment-3030" class="comment-body"><footer class="comment-meta"><div class="comment-author vcard"> <a href="https://0x1ff.wordpress.com/2010/12/09/xmlhttprequest-xhr-uses-multiple-packets-for-http-post-joseph-scott/" rel="external nofollow" class="url"><span class="fn">XMLHttpRequest XHR Uses Multiple Packets for HTTP POST? | Joseph Scott &laquo; the joy of coding</span><span class="screen-reader-text says">says:</span></a>
</div>
<div class="comment-metadata"> <a href="/2009/08/27/xmlhttprequest-xhr-uses-multiple-packets-for-http-post/#comment-3030"><time datetime="2010-12-09T11:26:20-07:00" title="Thu 9 Dec 2010 at 11:26 am">Thu 9 Dec 2010 at 11:26 am</time></a>
</div></footer><div class="comment-content entry-content"><p>[&#8230;] XMLHttpRequest XHR Uses Multiple Packets for HTTP POST? | Joseph Scott. [&#8230;]</p></div></article></div>
<div id="comment-3031" class="pingback odd alt thread-odd thread-alt depth-1"><article id="div-comment-3031" class="comment-body"><footer class="comment-meta"><div class="comment-author vcard"> <a href="http://www.9ued.com/5.html" rel="external nofollow" class="url"><span class="fn">9UED | 专注于用户体验 | 浏览器加载与页面de性能优化</span><span class="screen-reader-text says">says:</span></a>
</div>
<div class="comment-metadata"> <a href="/2009/08/27/xmlhttprequest-xhr-uses-multiple-packets-for-http-post/#comment-3031"><time datetime="2011-09-06T03:14:16-06:00" title="Tue 6 Sep 2011 at 3:14 am">Tue 6 Sep 2011 at 3:14 am</time></a>
</div></footer><div class="comment-content entry-content"><p>[&#8230;] 之所以用get性能更好的原因是有测试表明，即使数据很小，大部分浏览器（除了Firefox）在使用post时也会发送两个TCP的packet，所以性能上会有损失 [&#8230;]</p></div></article></div>
<div id="comment-3034" class="comment even thread-even depth-1"><article id="div-comment-3034" class="comment-body"><footer class="comment-meta"><div class="comment-author vcard"> <img id="grav-8fc211d3bc6bacd61fa0539129c7f307-120-60d16b501feec" alt="Steve Esco" src="/wp-content/uploads/gravatar-cache/8fc211d3bc6bacd61fa0539129c7f307-120.jpg" class="avatar avatar-120 photo" height="120" width="120" loading="lazy"><span class="fn">Steve Esco</span><span class="screen-reader-text says">says:</span>
</div>
<div class="comment-metadata"> <a href="/2009/08/27/xmlhttprequest-xhr-uses-multiple-packets-for-http-post/#comment-3034"><time datetime="2012-01-16T17:01:46-07:00" title="Mon 16 Jan 2012 at 5:01 pm">Mon 16 Jan 2012 at 5:01 pm</time></a>
</div></footer><div class="comment-content entry-content"><p>After pulling my hair out for four days while working on an HTTP server implementation using .NET sockets, I was able to determine that i may actually get a minimum of one packet but usually about 5 packets for a single HTTP post on most mobile browsers. This for an AJAX call with a content length of about 11 Kb.</p></div></article></div>
<div id="comment-3035" class="comment odd alt thread-odd thread-alt depth-1"><article id="div-comment-3035" class="comment-body"><footer class="comment-meta"><div class="comment-author vcard"> <img id="grav-89c27d27b73dd3690b3dad59f3a539d1-120-60d16b50217b5" alt="ericlaw1979" src="/wp-content/uploads/gravatar-cache/89c27d27b73dd3690b3dad59f3a539d1-120.jpg" class="avatar avatar-120 photo" height="120" width="120" loading="lazy"><span class="fn">ericlaw1979</span><span class="screen-reader-text says">says:</span>
</div>
<div class="comment-metadata"> <a href="/2009/08/27/xmlhttprequest-xhr-uses-multiple-packets-for-http-post/#comment-3035"><time datetime="2013-01-17T13:59:52-07:00" title="Thu 17 Jan 2013 at 1:59 pm">Thu 17 Jan 2013 at 1:59 pm</time></a>
</div></footer><div class="comment-content entry-content">
<p>In case you&#8217;re curious about why this happens in IE&#8211; the headers are sent by WinINET, but the calling pattern of XHR through URLMon to WinINET results in going async, which means that the POST body bytes aren&#8217;t typically supplied to WinINET until after the headers have been sent. This is something that we looked at changing in IE10 but ran out of time. In practice, the performance impact is pretty small.</p>
<p>To chandru&#8217;s question: The issue here is that the POST body can get lost if the browsing process is torn down in the window between the headers being sent to WinINET and the body being sent down. As a consequence, while a window is closing, you could end up with the headers and no body. (Fiddler will warn if it sees this happen).</p>
</div></article></div>
<div id="comment-15434" class="comment even thread-even depth-1"><article id="div-comment-15434" class="comment-body"><footer class="comment-meta"><div class="comment-author vcard"> <img id="grav-3f14efa0b2eb34021e7b256b4eeb5783-120-60d16b5022d45" alt="dc" src="/wp-content/uploads/gravatar-cache/3f14efa0b2eb34021e7b256b4eeb5783-120.jpg" class="avatar avatar-120 photo" height="120" width="120" loading="lazy"><span class="fn">dc</span><span class="screen-reader-text says">says:</span>
</div>
<div class="comment-metadata"> <a href="/2009/08/27/xmlhttprequest-xhr-uses-multiple-packets-for-http-post/#comment-15434"><time datetime="2016-09-23T20:56:26-06:00" title="Fri 23 Sep 2016 at 8:56 pm">Fri 23 Sep 2016 at 8:56 pm</time></a>
</div></footer><div class="comment-content entry-content"><p>Maybe now, 2016, the world is changed?</p></div></article></div>
<div id="comment-17709" class="comment odd alt thread-odd thread-alt depth-1"><article id="div-comment-17709" class="comment-body"><footer class="comment-meta"><div class="comment-author vcard"> <a href="http://njh.me/" rel="external nofollow" class="url"><img id="grav-dfd2fe00e768ea764a9fedcf9792a0cd-120-60d16b5023cb6" alt="Nicholas Humfrey" src="/wp-content/uploads/gravatar-cache/dfd2fe00e768ea764a9fedcf9792a0cd-120.jpg" class="avatar avatar-120 photo" height="120" width="120" loading="lazy"><span class="fn">Nicholas Humfrey</span><span class="screen-reader-text says">says:</span></a>
</div>
<div class="comment-metadata"> <a href="/2009/08/27/xmlhttprequest-xhr-uses-multiple-packets-for-http-post/#comment-17709"><time datetime="2016-10-11T12:48:20-06:00" title="Tue 11 Oct 2016 at 12:48 pm">Tue 11 Oct 2016 at 12:48 pm</time></a>
</div></footer><div class="comment-content entry-content">
<p>October 2016 and I am experiencing this problem with Safari 9.1.3 (10601.7.8) on Mac OS and also on iOS 10.0.2.<br> It is sending the HTTP headers in one packet and the body in a second packet, even for a very small request.</p>
<p>I am implementing a tiny IPv6 HTTP server on Arduino, which can&#8217;t currently cope with requests spanning multiple packets. So very frustrating that it works with Chrome but not Safari.</p>
<p>The good news however it that Chrome 53.0.2785.143 (also on Mac) is sending a single packet, containing both the headers and body.</p>
</div></article></div>
<div id="comment-34109" class="comment even thread-even depth-1"><article id="div-comment-34109" class="comment-body"><footer class="comment-meta"><div class="comment-author vcard"> <a href="https://laike9m.com/" rel="external nofollow" class="url"><img id="grav-820c611835bb6eea4851c318a3b73345-120-60d16b5024deb" alt="laike9m" src="/wp-content/uploads/gravatar-cache/820c611835bb6eea4851c318a3b73345-120.png" class="avatar avatar-120 photo" height="120" width="120" loading="lazy"><span class="fn">laike9m</span><span class="screen-reader-text says">says:</span></a>
</div>
<div class="comment-metadata"> <a href="/2009/08/27/xmlhttprequest-xhr-uses-multiple-packets-for-http-post/#comment-34109"><time datetime="2017-01-26T02:48:56-07:00" title="Thu 26 Jan 2017 at 2:48 am">Thu 26 Jan 2017 at 2:48 am</time></a>
</div></footer><div class="comment-content entry-content"><p>@Nicholas Humfrey You sure about that? I tested Chrome 55.0.2883.95 and it still sends two TCP packets.</p></div></article></div>
</div>
</div>
<hr class="styled-separator is-style-wide" aria-hidden="true">
<div id="respond" class="comment-respond">
<h2 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/2009/08/27/xmlhttprequest-xhr-uses-multiple-packets-for-http-post/#respond" style="display:none;">Cancel reply</a></small>
</h2>
<form action="/wp-comments-post.php" method="post" id="commentform" class="section-inner thin max-percentage" novalidate>
<p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p>
<p class="comment-form-comment"><label for="comment">Comment</label><textarea autocomplete="new-password" id="b031bf132f" name="b031bf132f" cols="45" rows="8" maxlength="65525" required="required"></textarea><textarea id="comment" aria-hidden="true" name="comment" autocomplete="new-password" style="padding:0 !important;clip:rect(1px, 1px, 1px, 1px) !important;position:absolute !important;white-space:nowrap !important;height:1px !important;width:1px !important;overflow:hidden !important;" tabindex="-1"></textarea><script data-noptimize type="text/javascript">document.getElementById("comment").setAttribute( "id", "a5902533f8e26e38c21e0b3dfb69995d" );document.getElementById("b031bf132f").setAttribute( "id", "comment" );</script></p>
<p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" required="required"></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="email" value="" size="30" maxlength="100" aria-describedby="email-notes" required="required"></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="url" value="" size="30" maxlength="200"></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment"> <input type="hidden" name="comment_post_ID" value="1411" id="comment_post_ID"> <input type="hidden" name="comment_parent" id="comment_parent" value="0"></p>
<p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="6afa8c3846"></p>
<input type="hidden" id="ak_js" name="ak_js" value="38"><textarea name="ak_hp_textarea" cols="45" rows="8" maxlength="100" style="display: none !important;"></textarea>
</form>
</div>
</div></article></main><div class="footer-nav-widgets-wrapper header-footer-group"><div class="footer-inner section-inner"><aside class="footer-widgets-outer-wrapper" role="complementary"><div class="footer-widgets-wrapper"><div class="footer-widgets column-one grid-item"><div class="widget widget_search"><div class="widget-content"><form role="search" method="get" class="search-form" action="/"> <label for="search-form-2"> <span class="screen-reader-text">Search for:</span> <input type="search" id="search-form-2" class="search-field" placeholder="Search &hellip;" value="" name="s"> </label> <input type="submit" class="search-submit" value="Search">
</form></div></div></div></div></aside></div></div>
<footer id="site-footer" role="contentinfo" class="header-footer-group"><div class="section-inner">
<div class="footer-credits">
<p class="footer-copyright">&copy;
2021 <a href="/">Joseph Scott</a></p>
<p class="powered-by-wordpress"> <a href="https://wordpress.org/"> Powered by WordPress </a></p>
</div> <a class="to-the-top" href="#site-header"> <span class="to-the-top-long"> To the top <span class="arrow" aria-hidden="true">&uarr;</span> </span> <span class="to-the-top-short"> Up <span class="arrow" aria-hidden="true">&uarr;</span> </span> </a>
</div></footer> <script>/(trident|msie)/i.test(navigator.userAgent)&&document.getElementById&&window.addEventListener&&window.addEventListener("hashchange",function(){var t,e=location.hash.substring(1);/^[A-z0-9_-]+$/.test(e)&&(t=document.getElementById(e))&&(/^(?:a|select|input|button|textarea)$/i.test(t.tagName)||(t.tabIndex=-1),t.focus())},!1);</script> <script defer src="/wp-content/cache/autoptimize/js/autoptimize_7f503920b823033d01081cc5ae68a469.js"></script>
</body>
</html>