{
    "version": "https://jsonfeed.org/version/1.1",
    "user_comment": "This feed allows you to read the posts from this site in any feed reader that supports the JSON Feed format. To add this feed to your reader, copy the following URL -- https://blog.josephscott.org/tag/enhance-php/feed/json/ -- and add it your reader.",
    "home_page_url": "https://blog.josephscott.org/tag/enhance-php/",
    "feed_url": "https://blog.josephscott.org/tag/enhance-php/feed/json/",
    "language": "en-US",
    "title": "enhance-php &#8211; Joseph Scott",
    "items": [
        {
            "id": "https://josephscott.org/?p=7785",
            "url": "https://blog.josephscott.org/2013/05/29/enhance-php-unit-testing/",
            "title": "Enhance PHP Unit Testing",
            "content_html": "<p>Like most people who have written unit tests for PHP code, I used <a href=\"https://github.com/sebastianbergmann/phpunit/\">PHPUnit</a>.  It is likely the most widely used testing library for PHP.</p>\n<p>I recently came across <a href='http://www.enhance-php.com/'>Enhance PHP Unit Testing for PHP</a>, so I thought I would give it a try.</p>\n<p><img loading=\"lazy\" src=\"https://sharedat.net/f/sD/sD77/enhance-php-logo.png\" width=\"452\" height=\"100\" class=\"aligncenter\" /></p>\n<p>Lets start with the traditional super basic <code>Math</code> class:</p>\n<p>[sourcecode lang=&#8221;php&#8221;]<br />\nclass Math {<br />\n    public function add_2_numbers( $num_1, $num_2 ) {<br />\n        return $num_1 + $num_2;<br />\n    }</p>\n<p>    public function subtract_2_numbers( $num_1, $num_2 ) {<br />\n        return $num1 &#8211; $num2;<br />\n    }</p>\n<p>    public function multiply_2_numbers( $num_1, $num_2 ) {<br />\n        return $num_1 * $num_2;<br />\n    }</p>\n<p>    public function divide_2_numbers( $num_1, $num_2 ) {<br />\n        return $num_1 / $num_2;<br />\n    }<br />\n}<br />\n[/sourcecode]</p>\n<p>There are a few ways to test this with Enhance PHP, I eventually settled on the <a href=\"http://www.enhance-php.com/Content/Method-Coverage/\">method coverage</a> approach:</p>\n<p>[sourcecode lang=&#8221;php&#8221;]<br />\nclass Math_Test extends EnhanceTestFixture {<br />\n    public function add_2_numbers() {<br />\n        $target = EnhanceCore::getCodeCoverageWrapper( &#8216;Math&#8217; );<br />\n        $scenario = EnhanceCore::getScenario( $target, &#8216;add_2_numbers&#8217; );</p>\n<p>        $scenario-&gt;with( 2, 2 )-&gt;expect( 4 );<br />\n        $scenario-&gt;with( 0, 2 )-&gt;expect( 2 );<br />\n        $scenario-&gt;with( 3, 2 )-&gt;expect( 5 );</p>\n<p>        $scenario-&gt;VerifyExpectations();<br />\n    }<br />\n}</p>\n<p>EnhanceCore::runTests();<br />\n[/sourcecode]</p>\n<p>The syntax is easy enough, we define a <code>$target</code> for the class we are going to test then use <code>$scenario</code> to make multiple calls to the same method.  In this case we&#8217;ll call <code>add_2_numbers</code> with three different sets of parameters and indicating what the expected result is.  After defining our scenarios calling <code>VerifyExpectations</code> takes care of checking each one.</p>\n<p>Running that test returns the following results:</p>\n<p>[sourcecode lang=&#8221;text&#8221;]<br />\nTest Passed</p>\n<p>add_2_numbers &#8211; Passed</p>\n<p>Math-&gt;add_2_numbers:3<br />\nMath-&gt;subtract_2_numbers:0<br />\nMath-&gt;multiply_2_numbers:0<br />\nMath-&gt;divide_2_numbers:0</p>\n<p>Test Passed<br />\nTest run took 0.0001370906829834 seconds<br />\n[/sourcecode]</p>\n<p>The code coverage results are only at the method level.  You get a report indicating how many tests there are for each method.  If you want granular line by line code coverage analysis you&#8217;ll still want to look at <a href=\"http://phpunit.de/manual/3.8/en/code-coverage-analysis.html\">PHPUnit + Xdebug</a>.</p>\n<p>To see what a failure looks like we&#8217;ll add these lines to the <code>Math_Test</code> class:</p>\n<p>[sourcecode lang=&#8221;php&#8221;]<br />\n        // for sufficiently large values of 2<br />\n        $scenario-&gt;with( 2, 2 )-&gt;expect( 5 );<br />\n[/sourcecode]</p>\n<p>Reports:</p>\n<p>[sourcecode lang=&#8221;text&#8221;]<br />\nTest Failed</p>\n<p>[Line 983 in file EnhanceTestFramework.php] add_2_numbers &#8211; Failed &#8211; Expected 5 but was 4</p>\n<p>Math-&gt;add_2_numbers:4<br />\nMath-&gt;subtract_2_numbers:0<br />\nMath-&gt;multiply_2_numbers:0<br />\nMath-&gt;divide_2_numbers:0</p>\n<p>Test Failed<br />\nTest run took 0.00020480155944824 seconds<br />\n[/sourcecode]</p>\n<p>There is a trade off in detail level using the scenario approach.  On the whole I like the tighter syntax of scenario, so I consider this level of detail good enough.</p>\n<p>I haven&#8217;t used Enhance PHP for enough tests to know for sure that I&#8217;d use it over PHPUnit, but I&#8217;m leaning that direction.  I really, really like having a single 56k file that handles the testing infrastructure.  That means I can easily distribute it along with my tests.</p>\n<p>If you are already heavily invested in using PHPUnit, switching to something else is likely not going to be worth it.  If you are writing tests for something new then <a href=\"http://www.enhance-php.com/\">Enhance PHP</a> is worth trying.</p>\n",
            "content_text": "Like most people who have written unit tests for PHP code, I used PHPUnit.  It is likely the most widely used testing library for PHP.\nI recently came across Enhance PHP Unit Testing for PHP, so I thought I would give it a try.\n\nLets start with the traditional super basic Math class:\n[sourcecode lang=&#8221;php&#8221;]\nclass Math {\n    public function add_2_numbers( $num_1, $num_2 ) {\n        return $num_1 + $num_2;\n    }\n    public function subtract_2_numbers( $num_1, $num_2 ) {\n        return $num1 &#8211; $num2;\n    }\n    public function multiply_2_numbers( $num_1, $num_2 ) {\n        return $num_1 * $num_2;\n    }\n    public function divide_2_numbers( $num_1, $num_2 ) {\n        return $num_1 / $num_2;\n    }\n}\n[/sourcecode]\nThere are a few ways to test this with Enhance PHP, I eventually settled on the method coverage approach:\n[sourcecode lang=&#8221;php&#8221;]\nclass Math_Test extends EnhanceTestFixture {\n    public function add_2_numbers() {\n        $target = EnhanceCore::getCodeCoverageWrapper( &#8216;Math&#8217; );\n        $scenario = EnhanceCore::getScenario( $target, &#8216;add_2_numbers&#8217; );\n        $scenario-&gt;with( 2, 2 )-&gt;expect( 4 );\n        $scenario-&gt;with( 0, 2 )-&gt;expect( 2 );\n        $scenario-&gt;with( 3, 2 )-&gt;expect( 5 );\n        $scenario-&gt;VerifyExpectations();\n    }\n}\nEnhanceCore::runTests();\n[/sourcecode]\nThe syntax is easy enough, we define a $target for the class we are going to test then use $scenario to make multiple calls to the same method.  In this case we&#8217;ll call add_2_numbers with three different sets of parameters and indicating what the expected result is.  After defining our scenarios calling VerifyExpectations takes care of checking each one.\nRunning that test returns the following results:\n[sourcecode lang=&#8221;text&#8221;]\nTest Passed\nadd_2_numbers &#8211; Passed\nMath-&gt;add_2_numbers:3\nMath-&gt;subtract_2_numbers:0\nMath-&gt;multiply_2_numbers:0\nMath-&gt;divide_2_numbers:0\nTest Passed\nTest run took 0.0001370906829834 seconds\n[/sourcecode]\nThe code coverage results are only at the method level.  You get a report indicating how many tests there are for each method.  If you want granular line by line code coverage analysis you&#8217;ll still want to look at PHPUnit + Xdebug.\nTo see what a failure looks like we&#8217;ll add these lines to the Math_Test class:\n[sourcecode lang=&#8221;php&#8221;]\n        // for sufficiently large values of 2\n        $scenario-&gt;with( 2, 2 )-&gt;expect( 5 );\n[/sourcecode]\nReports:\n[sourcecode lang=&#8221;text&#8221;]\nTest Failed\n[Line 983 in file EnhanceTestFramework.php] add_2_numbers &#8211; Failed &#8211; Expected 5 but was 4\nMath-&gt;add_2_numbers:4\nMath-&gt;subtract_2_numbers:0\nMath-&gt;multiply_2_numbers:0\nMath-&gt;divide_2_numbers:0\nTest Failed\nTest run took 0.00020480155944824 seconds\n[/sourcecode]\nThere is a trade off in detail level using the scenario approach.  On the whole I like the tighter syntax of scenario, so I consider this level of detail good enough.\nI haven&#8217;t used Enhance PHP for enough tests to know for sure that I&#8217;d use it over PHPUnit, but I&#8217;m leaning that direction.  I really, really like having a single 56k file that handles the testing infrastructure.  That means I can easily distribute it along with my tests.\nIf you are already heavily invested in using PHPUnit, switching to something else is likely not going to be worth it.  If you are writing tests for something new then Enhance PHP is worth trying.",
            "date_published": "2013-05-29T10:06:39-06:00",
            "date_modified": "2013-05-29T10:06:39-06:00",
            "authors": [
                {
                    "name": "josephscott",
                    "url": "https://blog.josephscott.org/author/josephscott/",
                    "avatar": "https://secure.gravatar.com/avatar/582b66ad5ae1b69c7601a990cb9a661a?s=512&d=mm&r=g"
                }
            ],
            "author": {
                "name": "josephscott",
                "url": "https://blog.josephscott.org/author/josephscott/",
                "avatar": "https://secure.gravatar.com/avatar/582b66ad5ae1b69c7601a990cb9a661a?s=512&d=mm&r=g"
            },
            "tags": [
                "enhance-php",
                "PHP",
                "unit-testing",
                "Posts"
            ]
        }
    ]
}