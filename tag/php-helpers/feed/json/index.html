{
    "version": "https://jsonfeed.org/version/1.1",
    "user_comment": "This feed allows you to read the posts from this site in any feed reader that supports the JSON Feed format. To add this feed to your reader, copy the following URL -- https://blog.josephscott.org/tag/php-helpers/feed/json/ -- and add it your reader.",
    "home_page_url": "https://blog.josephscott.org/tag/php-helpers/",
    "feed_url": "https://blog.josephscott.org/tag/php-helpers/feed/json/",
    "language": "en-US",
    "title": "php-helpers &#8211; Joseph Scott",
    "items": [
        {
            "id": "http://josephscott.org/?p=2029",
            "url": "https://blog.josephscott.org/2010/03/17/php-helpers-curl_http_request/",
            "title": "PHP Helpers: curl_http_request",
            "content_html": "<p><a href=\"http://curl.haxx.se/\">cURL</a> is one very handy program and library, I love having access to in PHP.  It has a ton of options though, and I can never seem to remember to flip the right knobs without reviewing the options list.  99% of the time I just want a simple function that does the right thing when making an HTTP request.  So here&#8217;s the new PHP Helpers function that sets up reasonable defaults for making HTTP requests using cURL:</p>\n<p>[sourcecode lang=&#8221;php&#8221;]<br />\nif ( !function_exists( &#8216;curl_http_request&#8217; ) ) {<br />\n    function curl_http_request( $url, $req = &#8216;GET&#8217;, $arg = array( ) ) {<br />\n        $body       = &#8221;;<br />\n        $cookies    = array( );<br />\n        $err_no     = 0;<br />\n        $err_msg    = &#8221;;<br />\n        $headers    = array( );<br />\n        $info       = array( );</p>\n<p>        $opt = array(<br />\n            &#8216;connect_timeout&#8217;   =&gt; 5,<br />\n            &#8216;cookies&#8217;           =&gt; array( ),<br />\n            &#8216;follow_location&#8217;   =&gt; TRUE,<br />\n            &#8216;http_headers&#8217;      =&gt; array( ),<br />\n            &#8216;max_redirects&#8217;     =&gt; 5,<br />\n            &#8216;timeout&#8217;           =&gt; 15,<br />\n            &#8216;password&#8217;          =&gt; &#8221;,<br />\n            &#8216;post_fields&#8217;       =&gt; array( ),<br />\n            &#8216;user_agent&#8217;        =&gt; &#8216;PHP curl_http_get&#8217;,<br />\n            &#8216;username&#8217;          =&gt; &#8221;,<br />\n            &#8216;verify_ssl&#8217;        =&gt; TRUE<br />\n        );<br />\n        foreach ( $opt as $k =&gt; $v ) {<br />\n            if ( isset( $arg[$k] ) ) {<br />\n                $opt[$k] = $arg[$k];<br />\n            }<br />\n        }</p>\n<p>        $curl_opt = array(<br />\n            CURLOPT_AUTOREFERER     =&gt; TRUE,<br />\n            CURLOPT_CONNECTTIMEOUT  =&gt; $opt[&#8216;connect_timeout&#8217;],<br />\n            CURLOPT_CUSTOMREQUEST   =&gt; $req,<br />\n            CURLOPT_ENCODING        =&gt; &#8221;,<br />\n            CURLOPT_FOLLOWLOCATION  =&gt; $opt[&#8216;follow_location&#8217;],<br />\n            CURLOPT_HEADER          =&gt; TRUE,<br />\n            CURLOPT_MAXREDIRS       =&gt; $opt[&#8216;max_redirects&#8217;],<br />\n            CURLOPT_RETURNTRANSFER  =&gt; TRUE,<br />\n            CURLOPT_TIMEOUT         =&gt; $opt[&#8216;timeout&#8217;],<br />\n            CURLOPT_USERAGENT       =&gt; $opt[&#8216;user_agent&#8217;],<br />\n        );</p>\n<p>        if (<br />\n            is_array( $opt[&#8216;cookies&#8217;] )<br />\n            &amp;&amp; count( $opt[&#8216;cookies&#8217;] ) &gt; 0<br />\n        ) {<br />\n            $curl_opt[CURLOPT_COOKIE] = implode( &#8216;;&#8217;, $opt[&#8216;cookies&#8217;] );<br />\n        }</p>\n<p>        if ( !empty( $opt[&#8216;username&#8217;] ) ) {<br />\n            $curl_opt[CURLOPT_USERPWD] = $opt[&#8216;username&#8217;] . &#8216;:&#8217; . $opt[&#8216;password&#8217;];<br />\n        }</p>\n<p>        if (<br />\n            is_array( $opt[&#8216;post_fields&#8217;] )<br />\n            &amp;&amp; count( $opt[&#8216;post_fields&#8217;] ) &gt; 0<br />\n        ) {<br />\n            $curl_opt[CURLOPT_POST] = TRUE;<br />\n            $curl_opt[CURLOPT_POSTFIELDS] = $opt[&#8216;post_fields&#8217;];<br />\n        }</p>\n<p>        if ( $req == &#8216;HEAD&#8217; ) {<br />\n            $curl_opt[CURLOPT_NOBODY] = TRUE;<br />\n        }</p>\n<p>        if (<br />\n            is_array( $opt[&#8216;http_headers&#8217;] )<br />\n            &amp;&amp; count( $opt[&#8216;http_headers&#8217;] ) &gt; 0<br />\n        ) {<br />\n            $curl_opt[CURLOPT_HTTPHEADER] = $opt[&#8216;http_headers&#8217;];<br />\n        }</p>\n<p>        if ( $opt[&#8216;verify_ssl&#8217;] === FALSE ) {<br />\n            $curl_opt[CURLOPT_SSL_VERIFYPEER] = FALSE;<br />\n            $curl_opt[CURLOPT_SSL_VERIFYHOST] = 0;<br />\n        }</p>\n<p>        $curl = curl_init( $url );<br />\n        curl_setopt_array( $curl, $curl_opt );</p>\n<p>        $body       = curl_exec( $curl );<br />\n        $err_no     = curl_errno( $curl );<br />\n        $err_msg    = curl_error( $curl );<br />\n        $info       = curl_getinfo( $curl );<br />\n        curl_close( $curl );</p>\n<p>        $header_string = trim( substr( $body, 0, $info[&#8216;header_size&#8217;] ) );<br />\n        $body = substr( $body, $info[&#8216;header_size&#8217;] );</p>\n<p>        if ( strpos( $header_string, &quot;rnrn&quot; ) !== FALSE ) {<br />\n            $header_string = end( explode( &quot;rnrn&quot;, $header_string ) );<br />\n            $header_string = str_replace( &quot;rn&quot;, &quot;n&quot;, $header_string );<br />\n        }</p>\n<p>        foreach ( explode( &quot;n&quot;, $header_string ) as $line ) {<br />\n            list( $k, $v ) = explode( &#8216;:&#8217;, $line, 2 );<br />\n            if ( empty( $v ) ) {<br />\n                continue;<br />\n            }</p>\n<p>            if ( strtolower( $k ) == &#8216;set-cookie&#8217; ) {<br />\n                $cookies[] = trim( $v );<br />\n            } else {<br />\n                $headers[$k] = trim( $v );<br />\n            }<br />\n        }</p>\n<p>        return array(<br />\n            &#8216;body&#8217;      =&gt; $body,<br />\n            &#8216;err_no&#8217;    =&gt; $err_no,<br />\n            &#8216;err_msg&#8217;   =&gt; $err_msg,<br />\n            &#8216;headers&#8217;   =&gt; $headers,<br />\n            &#8216;cookies&#8217;   =&gt; $cookies,<br />\n            &#8216;info&#8217;      =&gt; $info<br />\n        );<br />\n    } // function curl_http_request<br />\n}<br />\n[/sourcecode]</p>\n<p>It&#8217;s a bit longer that then other PHP Helper functions <img src=\"https://s.w.org/images/core/emoji/13.0.1/72x72/1f642.png\" alt=\"\ud83d\ude42\" class=\"wp-smiley\" style=\"height: 1em; max-height: 1em;\" /> .</p>\n",
            "content_text": "cURL is one very handy program and library, I love having access to in PHP.  It has a ton of options though, and I can never seem to remember to flip the right knobs without reviewing the options list.  99% of the time I just want a simple function that does the right thing when making an HTTP request.  So here&#8217;s the new PHP Helpers function that sets up reasonable defaults for making HTTP requests using cURL:\n[sourcecode lang=&#8221;php&#8221;]\nif ( !function_exists( &#8216;curl_http_request&#8217; ) ) {\n    function curl_http_request( $url, $req = &#8216;GET&#8217;, $arg = array( ) ) {\n        $body       = &#8221;;\n        $cookies    = array( );\n        $err_no     = 0;\n        $err_msg    = &#8221;;\n        $headers    = array( );\n        $info       = array( );\n        $opt = array(\n            &#8216;connect_timeout&#8217;   =&gt; 5,\n            &#8216;cookies&#8217;           =&gt; array( ),\n            &#8216;follow_location&#8217;   =&gt; TRUE,\n            &#8216;http_headers&#8217;      =&gt; array( ),\n            &#8216;max_redirects&#8217;     =&gt; 5,\n            &#8216;timeout&#8217;           =&gt; 15,\n            &#8216;password&#8217;          =&gt; &#8221;,\n            &#8216;post_fields&#8217;       =&gt; array( ),\n            &#8216;user_agent&#8217;        =&gt; &#8216;PHP curl_http_get&#8217;,\n            &#8216;username&#8217;          =&gt; &#8221;,\n            &#8216;verify_ssl&#8217;        =&gt; TRUE\n        );\n        foreach ( $opt as $k =&gt; $v ) {\n            if ( isset( $arg[$k] ) ) {\n                $opt[$k] = $arg[$k];\n            }\n        }\n        $curl_opt = array(\n            CURLOPT_AUTOREFERER     =&gt; TRUE,\n            CURLOPT_CONNECTTIMEOUT  =&gt; $opt[&#8216;connect_timeout&#8217;],\n            CURLOPT_CUSTOMREQUEST   =&gt; $req,\n            CURLOPT_ENCODING        =&gt; &#8221;,\n            CURLOPT_FOLLOWLOCATION  =&gt; $opt[&#8216;follow_location&#8217;],\n            CURLOPT_HEADER          =&gt; TRUE,\n            CURLOPT_MAXREDIRS       =&gt; $opt[&#8216;max_redirects&#8217;],\n            CURLOPT_RETURNTRANSFER  =&gt; TRUE,\n            CURLOPT_TIMEOUT         =&gt; $opt[&#8216;timeout&#8217;],\n            CURLOPT_USERAGENT       =&gt; $opt[&#8216;user_agent&#8217;],\n        );\n        if (\n            is_array( $opt[&#8216;cookies&#8217;] )\n            &amp;&amp; count( $opt[&#8216;cookies&#8217;] ) &gt; 0\n        ) {\n            $curl_opt[CURLOPT_COOKIE] = implode( &#8216;;&#8217;, $opt[&#8216;cookies&#8217;] );\n        }\n        if ( !empty( $opt[&#8216;username&#8217;] ) ) {\n            $curl_opt[CURLOPT_USERPWD] = $opt[&#8216;username&#8217;] . &#8216;:&#8217; . $opt[&#8216;password&#8217;];\n        }\n        if (\n            is_array( $opt[&#8216;post_fields&#8217;] )\n            &amp;&amp; count( $opt[&#8216;post_fields&#8217;] ) &gt; 0\n        ) {\n            $curl_opt[CURLOPT_POST] = TRUE;\n            $curl_opt[CURLOPT_POSTFIELDS] = $opt[&#8216;post_fields&#8217;];\n        }\n        if ( $req == &#8216;HEAD&#8217; ) {\n            $curl_opt[CURLOPT_NOBODY] = TRUE;\n        }\n        if (\n            is_array( $opt[&#8216;http_headers&#8217;] )\n            &amp;&amp; count( $opt[&#8216;http_headers&#8217;] ) &gt; 0\n        ) {\n            $curl_opt[CURLOPT_HTTPHEADER] = $opt[&#8216;http_headers&#8217;];\n        }\n        if ( $opt[&#8216;verify_ssl&#8217;] === FALSE ) {\n            $curl_opt[CURLOPT_SSL_VERIFYPEER] = FALSE;\n            $curl_opt[CURLOPT_SSL_VERIFYHOST] = 0;\n        }\n        $curl = curl_init( $url );\n        curl_setopt_array( $curl, $curl_opt );\n        $body       = curl_exec( $curl );\n        $err_no     = curl_errno( $curl );\n        $err_msg    = curl_error( $curl );\n        $info       = curl_getinfo( $curl );\n        curl_close( $curl );\n        $header_string = trim( substr( $body, 0, $info[&#8216;header_size&#8217;] ) );\n        $body = substr( $body, $info[&#8216;header_size&#8217;] );\n        if ( strpos( $header_string, &quot;rnrn&quot; ) !== FALSE ) {\n            $header_string = end( explode( &quot;rnrn&quot;, $header_string ) );\n            $header_string = str_replace( &quot;rn&quot;, &quot;n&quot;, $header_string );\n        }\n        foreach ( explode( &quot;n&quot;, $header_string ) as $line ) {\n            list( $k, $v ) = explode( &#8216;:&#8217;, $line, 2 );\n            if ( empty( $v ) ) {\n                continue;\n            }\n            if ( strtolower( $k ) == &#8216;set-cookie&#8217; ) {\n                $cookies[] = trim( $v );\n            } else {\n                $headers[$k] = trim( $v );\n            }\n        }\n        return array(\n            &#8216;body&#8217;      =&gt; $body,\n            &#8216;err_no&#8217;    =&gt; $err_no,\n            &#8216;err_msg&#8217;   =&gt; $err_msg,\n            &#8216;headers&#8217;   =&gt; $headers,\n            &#8216;cookies&#8217;   =&gt; $cookies,\n            &#8216;info&#8217;      =&gt; $info\n        );\n    } // function curl_http_request\n}\n[/sourcecode]\nIt&#8217;s a bit longer that then other PHP Helper functions  .",
            "date_published": "2010-03-17T15:07:18-06:00",
            "date_modified": "2010-03-17T15:07:18-06:00",
            "authors": [
                {
                    "name": "josephscott",
                    "url": "https://blog.josephscott.org/author/josephscott/",
                    "avatar": "https://secure.gravatar.com/avatar/582b66ad5ae1b69c7601a990cb9a661a?s=512&d=mm&r=g"
                }
            ],
            "author": {
                "name": "josephscott",
                "url": "https://blog.josephscott.org/author/josephscott/",
                "avatar": "https://secure.gravatar.com/avatar/582b66ad5ae1b69c7601a990cb9a661a?s=512&d=mm&r=g"
            },
            "tags": [
                "curl",
                "curl_http_request",
                "PHP",
                "php-helpers",
                "Posts"
            ]
        },
        {
            "id": "http://josephscott.org/?p=1918",
            "url": "https://blog.josephscott.org/2010/02/19/php-helpers-make_slug/",
            "title": "PHP Helpers: make_slug",
            "content_html": "<p>New function, make_slug &#8211;</p>\n<p>[sourcecode lang=&#8221;php&#8221;]<br />\nif ( !function_exists( &#8216;make_slug&#8217; ) ) {<br />\n    function make_slug( $str ) {<br />\n        $url_str = strtolower( trim( $str ) );</p>\n<p>        $url_str = preg_replace( &#8216;/[s_]+/&#8217;, &#8216;-&#8216;, $url_str );<br />\n        $url_str = preg_replace( &#8216;/-{2,}/&#8217;, &#8216;-&#8216;, $url_str );<br />\n        $url_str = preg_replace( &#8216;/[^a-z0-9-]/&#8217;, &#8221;, $url_str );</p>\n<p>        return $url_str;<br />\n    }<br />\n}<br />\n[/sourcecode]</p>\n<p>This takes a string and returns a slug that is more URL friendly.  For example &#8220;<code>Do    This_Today &#8211; Please</code>&#8221; would become &#8220;<code>do-this-today-please</code>&#8220;.</p>\n<p>The approach is pretty simple:</p>\n<ul>\n<li>lower case everything (line 3)</li>\n<li>replace space and underscore with dash (line 5)</li>\n<li>replace two or more dashes with a single dash (line 6)</li>\n<li>remove any other characters that aren&#8217;t a-z, 0-9 or a dash (line 7)</li>\n</ul>\n",
            "content_text": "New function, make_slug &#8211;\n[sourcecode lang=&#8221;php&#8221;]\nif ( !function_exists( &#8216;make_slug&#8217; ) ) {\n    function make_slug( $str ) {\n        $url_str = strtolower( trim( $str ) );\n        $url_str = preg_replace( &#8216;/[s_]+/&#8217;, &#8216;-&#8216;, $url_str );\n        $url_str = preg_replace( &#8216;/-{2,}/&#8217;, &#8216;-&#8216;, $url_str );\n        $url_str = preg_replace( &#8216;/[^a-z0-9-]/&#8217;, &#8221;, $url_str );\n        return $url_str;\n    }\n}\n[/sourcecode]\nThis takes a string and returns a slug that is more URL friendly.  For example &#8220;Do    This_Today &#8211; Please&#8221; would become &#8220;do-this-today-please&#8220;.\nThe approach is pretty simple:\n\nlower case everything (line 3)\nreplace space and underscore with dash (line 5)\nreplace two or more dashes with a single dash (line 6)\nremove any other characters that aren&#8217;t a-z, 0-9 or a dash (line 7)",
            "date_published": "2010-02-19T17:19:16-07:00",
            "date_modified": "2010-02-19T17:19:16-07:00",
            "authors": [
                {
                    "name": "josephscott",
                    "url": "https://blog.josephscott.org/author/josephscott/",
                    "avatar": "https://secure.gravatar.com/avatar/582b66ad5ae1b69c7601a990cb9a661a?s=512&d=mm&r=g"
                }
            ],
            "author": {
                "name": "josephscott",
                "url": "https://blog.josephscott.org/author/josephscott/",
                "avatar": "https://secure.gravatar.com/avatar/582b66ad5ae1b69c7601a990cb9a661a?s=512&d=mm&r=g"
            },
            "tags": [
                "make_slug",
                "PHP",
                "php-helpers",
                "Posts"
            ]
        },
        {
            "id": "http://josephscott.org/?p=1898",
            "url": "https://blog.josephscott.org/2010/02/12/php-helpers-redirect_url/",
            "title": "PHP Helpers: redirect_url",
            "content_html": "<p>New function: redirect_url</p>\n<p>[sourcecode lang=&#8221;php&#8221;]<br />\nif ( !function_exists( &#8216;redirect_url&#8217; ) ) {<br />\n    function redirect_url( $url, $status = 302 ) {<br />\n        header( &quot;Location: {$url}&quot;, TRUE, $status );<br />\n        exit;<br />\n    }<br />\n}<br />\n[/sourcecode]</p>\n<p>A special case wrapper around the <a href=\"http://us.php.net/manual/en/function.header.php\">header</a> function to do URL redirection.  I specifically added the exit call inside the function so that redirect happens immediately.  That way I don&#8217;t have a chance to forget about it later on <img src=\"https://s.w.org/images/core/emoji/13.0.1/72x72/1f642.png\" alt=\"\ud83d\ude42\" class=\"wp-smiley\" style=\"height: 1em; max-height: 1em;\" /></p>\n",
            "content_text": "New function: redirect_url\n[sourcecode lang=&#8221;php&#8221;]\nif ( !function_exists( &#8216;redirect_url&#8217; ) ) {\n    function redirect_url( $url, $status = 302 ) {\n        header( &quot;Location: {$url}&quot;, TRUE, $status );\n        exit;\n    }\n}\n[/sourcecode]\nA special case wrapper around the header function to do URL redirection.  I specifically added the exit call inside the function so that redirect happens immediately.  That way I don&#8217;t have a chance to forget about it later on",
            "date_published": "2010-02-12T16:55:35-07:00",
            "date_modified": "2010-02-12T16:55:35-07:00",
            "authors": [
                {
                    "name": "josephscott",
                    "url": "https://blog.josephscott.org/author/josephscott/",
                    "avatar": "https://secure.gravatar.com/avatar/582b66ad5ae1b69c7601a990cb9a661a?s=512&d=mm&r=g"
                }
            ],
            "author": {
                "name": "josephscott",
                "url": "https://blog.josephscott.org/author/josephscott/",
                "avatar": "https://secure.gravatar.com/avatar/582b66ad5ae1b69c7601a990cb9a661a?s=512&d=mm&r=g"
            },
            "tags": [
                "PHP",
                "php-helpers",
                "redirect_url",
                "Posts"
            ]
        },
        {
            "id": "http://josephscott.org/?p=1862",
            "url": "https://blog.josephscott.org/2010/02/05/php-helpers-html_var_dump/",
            "title": "PHP Helpers: html_var_dump",
            "content_html": "<p>With the last function being <a href=\"http://josephscott.org/archives/2010/02/php-helpers-html_print_r/\">html_print_r</a> this next one should come as no suprise, <code>html_var_dump</code>:</p>\n<p>[sourcecode lang=&#8221;php&#8221;]<br />\nif ( !function_exists( &#8216;html_var_dump&#8217; ) ) {<br />\n    function html_var_dump( $data ) {<br />\n        $out = &quot;n&lt;pre class=&#8217;html-var-dump&#8217;&quot;;<br />\n        $out .= &quot; style=&#8217;border: 1px solid #ccc; padding: 7px;&#8217;&gt;n&quot;;</p>\n<p>        ob_start( );<br />\n        var_dump( $data );<br />\n        $out .= esc_html( ob_get_contents( ) );<br />\n        ob_end_clean( );</p>\n<p>        $out .= &quot;n&lt;/pre&gt;n&quot;;</p>\n<p>        return $out;<br />\n    }<br />\n}<br />\n[/sourcecode]</p>\n<p>Even though I tend to use print_r more often than <a href=\"http://us.php.net/var_dump\">var_dump</a>, there are times where the type data that var_dump provides can be very helpful.  Unfortunately var_dump will always display data, so it needed to be wrapped in a few <a href=\"http://us.php.net/manual/en/ref.outcontrol.php\">output control functions</a> ( ob_start, ob_get_contents, and ob_end_clean ) to capture it.</p>\n",
            "content_text": "With the last function being html_print_r this next one should come as no suprise, html_var_dump:\n[sourcecode lang=&#8221;php&#8221;]\nif ( !function_exists( &#8216;html_var_dump&#8217; ) ) {\n    function html_var_dump( $data ) {\n        $out = &quot;n&lt;pre class=&#8217;html-var-dump&#8217;&quot;;\n        $out .= &quot; style=&#8217;border: 1px solid #ccc; padding: 7px;&#8217;&gt;n&quot;;\n        ob_start( );\n        var_dump( $data );\n        $out .= esc_html( ob_get_contents( ) );\n        ob_end_clean( );\n        $out .= &quot;n&lt;/pre&gt;n&quot;;\n        return $out;\n    }\n}\n[/sourcecode]\nEven though I tend to use print_r more often than var_dump, there are times where the type data that var_dump provides can be very helpful.  Unfortunately var_dump will always display data, so it needed to be wrapped in a few output control functions ( ob_start, ob_get_contents, and ob_end_clean ) to capture it.",
            "date_published": "2010-02-05T09:29:46-07:00",
            "date_modified": "2010-02-05T09:29:46-07:00",
            "authors": [
                {
                    "name": "josephscott",
                    "url": "https://blog.josephscott.org/author/josephscott/",
                    "avatar": "https://secure.gravatar.com/avatar/582b66ad5ae1b69c7601a990cb9a661a?s=512&d=mm&r=g"
                }
            ],
            "author": {
                "name": "josephscott",
                "url": "https://blog.josephscott.org/author/josephscott/",
                "avatar": "https://secure.gravatar.com/avatar/582b66ad5ae1b69c7601a990cb9a661a?s=512&d=mm&r=g"
            },
            "tags": [
                "html_var_dump",
                "PHP",
                "php-helpers",
                "Posts"
            ]
        },
        {
            "id": "http://josephscott.org/?p=1837",
            "url": "https://blog.josephscott.org/2010/02/01/php-helpers-html_print_r/",
            "title": "PHP Helpers: html_print_r",
            "content_html": "<p>Before I get to the next PHP Helpers function I wanted to mention that I&#8217;ve made the code available as a Google Code Project at <a href=\"http://code.google.com/p/php-helpers/\">http://code.google.com/p/php-helpers/</a>.  I added specific licensing terms ( MIT style ) &#8211; <a href=\"http://code.google.com/p/php-helpers/source/browse/trunk/license.txt\">http://code.google.com/p/php-helpers/source/browse/trunk/license.txt</a>.  There&#8217;s also a <a href=\"http://code.google.com/p/php-helpers/source/browse/trunk/changelog.txt\">changelog</a> available to see when functions were added.</p>\n<p>With that out of the way here&#8217;s the next PHP Helpers function, <code>html_print_r</code>:</p>\n<p>[sourcecode lang=&#8221;php&#8221;]<br />\nif ( !function_exists( &#8216;html_print_r&#8217; ) ) {<br />\n    function html_print_r( $data ) {<br />\n        $out = &quot;n&lt;pre class=&#8217;html-print-r&#8217;&quot;;<br />\n        $out .= &quot; style=&#8217;border: 1px solid #ccc; padding: 7px;&#8217;&gt;n&quot;;<br />\n        $out .= esc_html( print_r( $data, TRUE ) );<br />\n        $out .= &quot;n&lt;/pre&gt;n&quot;;</p>\n<p>        return $out;<br />\n    }<br />\n}<br />\n[/sourcecode]</p>\n<p>I added this because I use PHP&#8217;s <a href=\"http://us.php.net/print_r\">print_r</a> in an HTML context quite a bit.  To make the output look reasonable I was always adding PRE tags, which got boring fast.</p>\n",
            "content_text": "Before I get to the next PHP Helpers function I wanted to mention that I&#8217;ve made the code available as a Google Code Project at http://code.google.com/p/php-helpers/.  I added specific licensing terms ( MIT style ) &#8211; http://code.google.com/p/php-helpers/source/browse/trunk/license.txt.  There&#8217;s also a changelog available to see when functions were added.\nWith that out of the way here&#8217;s the next PHP Helpers function, html_print_r:\n[sourcecode lang=&#8221;php&#8221;]\nif ( !function_exists( &#8216;html_print_r&#8217; ) ) {\n    function html_print_r( $data ) {\n        $out = &quot;n&lt;pre class=&#8217;html-print-r&#8217;&quot;;\n        $out .= &quot; style=&#8217;border: 1px solid #ccc; padding: 7px;&#8217;&gt;n&quot;;\n        $out .= esc_html( print_r( $data, TRUE ) );\n        $out .= &quot;n&lt;/pre&gt;n&quot;;\n        return $out;\n    }\n}\n[/sourcecode]\nI added this because I use PHP&#8217;s print_r in an HTML context quite a bit.  To make the output look reasonable I was always adding PRE tags, which got boring fast.",
            "date_published": "2010-02-01T09:33:13-07:00",
            "date_modified": "2010-02-01T09:33:13-07:00",
            "authors": [
                {
                    "name": "josephscott",
                    "url": "https://blog.josephscott.org/author/josephscott/",
                    "avatar": "https://secure.gravatar.com/avatar/582b66ad5ae1b69c7601a990cb9a661a?s=512&d=mm&r=g"
                }
            ],
            "author": {
                "name": "josephscott",
                "url": "https://blog.josephscott.org/author/josephscott/",
                "avatar": "https://secure.gravatar.com/avatar/582b66ad5ae1b69c7601a990cb9a661a?s=512&d=mm&r=g"
            },
            "tags": [
                "html_print_r",
                "PHP",
                "php-helpers",
                "Posts"
            ]
        },
        {
            "id": "http://josephscott.org/?p=1796",
            "url": "https://blog.josephscott.org/2010/01/19/php-helpers-esc_html/",
            "title": "PHP Helpers: esc_html",
            "content_html": "<p>Next up in the PHP Helpers series is <code>esc_html</code>:</p>\n<p>[sourcecode lang=&#8221;php&#8221;]<br />\nif ( !function_exists( &#8216;esc_html&#8217; ) ) {<br />\n    function esc_html( $html, $char_set = &#8216;UTF-8&#8217; ) {<br />\n        if ( empty( $html ) ) {<br />\n            return &#8221;;<br />\n        }</p>\n<p>        $html = (string) $html;<br />\n        $html = htmlspecialchars( $html, ENT_QUOTES, $char_set );</p>\n<p>        return $html;<br />\n    }<br />\n}<br />\n[/sourcecode]</p>\n<p>As you might have guessed this function escapes strings for HTML output.  It&#8217;s not much more than a wrapper around <a href=\"http://us.php.net/htmlspecialchars\">htmlspecialchars</a>, but provides central place to tweak your desired default behavior.</p>\n<p>There&#8217;s room to experiment with additional optimizations and strict checking in this as well.  I added the basics (look for empty strings, type cast to a string), if you&#8217;ve got a favorite additional check leave a comment below.</p>\n",
            "content_text": "Next up in the PHP Helpers series is esc_html:\n[sourcecode lang=&#8221;php&#8221;]\nif ( !function_exists( &#8216;esc_html&#8217; ) ) {\n    function esc_html( $html, $char_set = &#8216;UTF-8&#8217; ) {\n        if ( empty( $html ) ) {\n            return &#8221;;\n        }\n        $html = (string) $html;\n        $html = htmlspecialchars( $html, ENT_QUOTES, $char_set );\n        return $html;\n    }\n}\n[/sourcecode]\nAs you might have guessed this function escapes strings for HTML output.  It&#8217;s not much more than a wrapper around htmlspecialchars, but provides central place to tweak your desired default behavior.\nThere&#8217;s room to experiment with additional optimizations and strict checking in this as well.  I added the basics (look for empty strings, type cast to a string), if you&#8217;ve got a favorite additional check leave a comment below.",
            "date_published": "2010-01-19T07:12:18-07:00",
            "date_modified": "2010-01-19T07:12:18-07:00",
            "authors": [
                {
                    "name": "josephscott",
                    "url": "https://blog.josephscott.org/author/josephscott/",
                    "avatar": "https://secure.gravatar.com/avatar/582b66ad5ae1b69c7601a990cb9a661a?s=512&d=mm&r=g"
                }
            ],
            "author": {
                "name": "josephscott",
                "url": "https://blog.josephscott.org/author/josephscott/",
                "avatar": "https://secure.gravatar.com/avatar/582b66ad5ae1b69c7601a990cb9a661a?s=512&d=mm&r=g"
            },
            "tags": [
                "esc_html",
                "PHP",
                "php-helpers",
                "Posts"
            ]
        },
        {
            "id": "http://josephscott.org/?p=1748",
            "url": "https://blog.josephscott.org/2010/01/14/php-helpers-debug_log/",
            "title": "PHP Helpers: debug_log",
            "content_html": "<p>I&#8217;ve been thinking recently about useful PHP functions, ones that are so handy that I&#8217;d like to have them available in every PHP code base I work on.  These aren&#8217;t necessarily big elaborate functions, they do a single task and do it well.  So I&#8217;ll be writing a series of posts called &#8216;PHP Helpers&#8217;.  I&#8217;ve started a php-helpers.php file to keep these in.</p>\n<p>The first PHP Helpers function is <code>debug_log</code> &#8211;</p>\n<p>[sourcecode lang=&#8221;php&#8221;]<br />\nif ( !function_exists( &#8216;debug_log&#8217; ) ) {<br />\n    function debug_log( $msg, $file = &#8216;/tmp/debug.txt&#8217; ) {<br />\n        $msg = gmdate( &#8216;Y-m-d H:i:s&#8217; ) . &#8216; &#8216; . print_r( $msg, TRUE ) . &quot;n&quot;;<br />\n        error_log( $msg, 3, $file );<br />\n    }<br />\n}<br />\n[/sourcecode]</p>\n<p>This function is wrapped in a function_exists check to make sure that it doesn&#8217;t collide with an existing function of the same name.  I could have put this in a separate class, but I wanted to treat these as first class functions.</p>\n<p>This function takes a variable and writes it out to log file (/tmp/debug.txt by default).  The variable can be a string, integer, float, array or object (basically any PHP type) since it gets passed through <a href=\"http://us.php.net/print_r\">print_r</a> for processing.  Each log entry gets a time stamp to make it easy to keep track of the different entries.</p>\n<p>To write an entry to the debug log it uses the <a href=\"http://us.php.net/manual/en/function.error-log.php\">error_log</a> function, which makes it easy to append new lines to a text file.</p>\n<p>Here&#8217;s a very simple and contrived example of how to use the function:</p>\n<p>[sourcecode lang=&#8221;php&#8221;]<br />\n$data = array(<br />\n  &#8216;name&#8217; =&gt; &#8216;Joseph&#8217;,<br />\n  &#8216;url&#8217; =&gt; &#8216;http://josephscott.org/&#8217;<br />\n);</p>\n<p>debug_log( $data );<br />\n[/sourcecode]</p>\n<p>The log entry in /tmp/debug.txt looks like:</p>\n<p>[sourcecode]<br />\n2010-01-14 18:01:37 Array<br />\n(<br />\n    [name] =&gt; Joseph<br />\n    [url] =&gt; http://josephscott.org/<br />\n)<br />\n[/sourcecode]</p>\n<p>Nothing flashy, just a simple way to log information to a separate file.</p>\n",
            "content_text": "I&#8217;ve been thinking recently about useful PHP functions, ones that are so handy that I&#8217;d like to have them available in every PHP code base I work on.  These aren&#8217;t necessarily big elaborate functions, they do a single task and do it well.  So I&#8217;ll be writing a series of posts called &#8216;PHP Helpers&#8217;.  I&#8217;ve started a php-helpers.php file to keep these in.\nThe first PHP Helpers function is debug_log &#8211;\n[sourcecode lang=&#8221;php&#8221;]\nif ( !function_exists( &#8216;debug_log&#8217; ) ) {\n    function debug_log( $msg, $file = &#8216;/tmp/debug.txt&#8217; ) {\n        $msg = gmdate( &#8216;Y-m-d H:i:s&#8217; ) . &#8216; &#8216; . print_r( $msg, TRUE ) . &quot;n&quot;;\n        error_log( $msg, 3, $file );\n    }\n}\n[/sourcecode]\nThis function is wrapped in a function_exists check to make sure that it doesn&#8217;t collide with an existing function of the same name.  I could have put this in a separate class, but I wanted to treat these as first class functions.\nThis function takes a variable and writes it out to log file (/tmp/debug.txt by default).  The variable can be a string, integer, float, array or object (basically any PHP type) since it gets passed through print_r for processing.  Each log entry gets a time stamp to make it easy to keep track of the different entries.\nTo write an entry to the debug log it uses the error_log function, which makes it easy to append new lines to a text file.\nHere&#8217;s a very simple and contrived example of how to use the function:\n[sourcecode lang=&#8221;php&#8221;]\n$data = array(\n  &#8216;name&#8217; =&gt; &#8216;Joseph&#8217;,\n  &#8216;url&#8217; =&gt; &#8216;http://josephscott.org/&#8217;\n);\ndebug_log( $data );\n[/sourcecode]\nThe log entry in /tmp/debug.txt looks like:\n[sourcecode]\n2010-01-14 18:01:37 Array\n(\n    [name] =&gt; Joseph\n    [url] =&gt; http://josephscott.org/\n)\n[/sourcecode]\nNothing flashy, just a simple way to log information to a separate file.",
            "date_published": "2010-01-14T11:10:24-07:00",
            "date_modified": "2010-01-14T11:10:24-07:00",
            "authors": [
                {
                    "name": "josephscott",
                    "url": "https://blog.josephscott.org/author/josephscott/",
                    "avatar": "https://secure.gravatar.com/avatar/582b66ad5ae1b69c7601a990cb9a661a?s=512&d=mm&r=g"
                }
            ],
            "author": {
                "name": "josephscott",
                "url": "https://blog.josephscott.org/author/josephscott/",
                "avatar": "https://secure.gravatar.com/avatar/582b66ad5ae1b69c7601a990cb9a661a?s=512&d=mm&r=g"
            },
            "tags": [
                "debug_log",
                "PHP",
                "php-helpers",
                "Posts"
            ]
        }
    ]
}