{
    "version": "https://jsonfeed.org/version/1.1",
    "user_comment": "This feed allows you to read the posts from this site in any feed reader that supports the JSON Feed format. To add this feed to your reader, copy the following URL -- https://blog.josephscott.org/tag/anonymous-functions/feed/json/ -- and add it your reader.",
    "home_page_url": "https://blog.josephscott.org/tag/anonymous-functions/",
    "feed_url": "https://blog.josephscott.org/tag/anonymous-functions/feed/json/",
    "language": "en-US",
    "title": "anonymous-functions &#8211; Joseph Scott",
    "items": [
        {
            "id": "http://josephscott.org/?p=4079",
            "url": "https://blog.josephscott.org/2011/05/17/an-irc-experiment-raifbot/",
            "title": "An IRC Experiment \u2013 raifbot",
            "content_html": "<p>Toward the end of 2010 I really got the itch to experiment with new/different coding projects.  The first thing this led me to was to write an IRC bot.</p>\n<p>While I use IRC daily, it has been years since I&#8217;ve been any deeper besides casual use.  So I started with writing a simple library to speak to IRC servers.  That didn&#8217;t hold my interest for very long, so I retired that code and started building on top of the <a href=\"http://pear.php.net/package/Net_SmartIRC/\">Net_SmartIRC</a> package from <a href=\"http://pear.php.net/\">Pear</a>.   I was writing this bot in <a href=\"http://php.net/\">PHP</a>, in part because I wanted to play with a few new language feature, specifically &#8211; <a href=\"http://www.php.net/manual/en/functions.anonymous.php\">anonymous functions</a>.  More on those in a minute.</p>\n<p>From that effort was born <a href=\"http://raifbot.wordpress.com/\">raifbot</a>, which hangs on out #uphpu on <a href=\"http://freenode.net/\">freenode</a>.  It&#8217;s been fun hooking up bot commands to various features and servers, you can see the list of currently support commands at <a href=\"http://raifbot.wordpress.com/\">http://raifbot.wordpress.com/</a>.  Many of the popular commands are just fun little diversions: <a href=\"http://raifbot.wordpress.com/commands-lart/\">$lart</a>, <a href=\"http://raifbot.wordpress.com/commands-8ball/\">$8ball</a>, <a href=\"http://raifbot.wordpress.com/commands-chuck-fact/\">$chuck-fact</a>.  Others reach out to online services to provide info, like <a href=\"http://raifbot.wordpress.com/commands-weather/\">$weather</a>.</p>\n<p>Now back to the idea of using anonymous functions.  All of the command functions in raifbot have this style:</p>\n<p>[sourcecode lang=&#8221;php&#8221;]<br />\n$_commands[&#8216;rot13&#8217;] = function ( $channel, $nick, $msg ) {<br />\n    global $bot;</p>\n<p>    if ( empty( $msg ) ) {<br />\n        return;<br />\n    }</p>\n<p>    $reply = &quot;{$nick} &#8211; rot13( &#8216;{$msg}&#8217; ) : &quot; . str_rot13( $msg );<br />\n    $bot-&gt;send_message( $channel, $reply );<br />\n};<br />\n[/sourcecode]</p>\n<p>Each command function definition is just an entry in the global <code>$_commands</code> array.</p>\n<p>I used this approach because I had a particular feature in mind, the ability to add new commands and update existing ones without having to restart the bot process.  In the end I choose anonymous functions to accomplish this, which allowed me to avoid <code>eval</code> and other odd language hacks.</p>\n<p>When I send a <code>HUP</code> signal to the bot process that triggers a reload of all the command files.  At that point updating a command function definition is just a matter of updating an entry in an array.  No errors and no fuss.  I add new commands and update existing ones without having to ever take down the bot process.  So far this has worked very well.</p>\n<p>If you want to interact with raifbot join the #uphpu channel on freenode and give a spin.  Remember all of the commands start with $ and the list of supported commands is <a href=\"http://raifbot.wordpress.com/\">http://raifbot.wordpress.com/</a>.</p>\n<p>In addition to raifbot I&#8217;ve started a few other experimental projects.  Some more successful than others.  Though one I started last week I&#8217;m particularly excited about, I&#8217;ll post more on that after I&#8217;ve added a few more features.</p>\n",
            "content_text": "Toward the end of 2010 I really got the itch to experiment with new/different coding projects.  The first thing this led me to was to write an IRC bot.\nWhile I use IRC daily, it has been years since I&#8217;ve been any deeper besides casual use.  So I started with writing a simple library to speak to IRC servers.  That didn&#8217;t hold my interest for very long, so I retired that code and started building on top of the Net_SmartIRC package from Pear.   I was writing this bot in PHP, in part because I wanted to play with a few new language feature, specifically &#8211; anonymous functions.  More on those in a minute.\nFrom that effort was born raifbot, which hangs on out #uphpu on freenode.  It&#8217;s been fun hooking up bot commands to various features and servers, you can see the list of currently support commands at http://raifbot.wordpress.com/.  Many of the popular commands are just fun little diversions: $lart, $8ball, $chuck-fact.  Others reach out to online services to provide info, like $weather.\nNow back to the idea of using anonymous functions.  All of the command functions in raifbot have this style:\n[sourcecode lang=&#8221;php&#8221;]\n$_commands[&#8216;rot13&#8217;] = function ( $channel, $nick, $msg ) {\n    global $bot;\n    if ( empty( $msg ) ) {\n        return;\n    }\n    $reply = &quot;{$nick} &#8211; rot13( &#8216;{$msg}&#8217; ) : &quot; . str_rot13( $msg );\n    $bot-&gt;send_message( $channel, $reply );\n};\n[/sourcecode]\nEach command function definition is just an entry in the global $_commands array.\nI used this approach because I had a particular feature in mind, the ability to add new commands and update existing ones without having to restart the bot process.  In the end I choose anonymous functions to accomplish this, which allowed me to avoid eval and other odd language hacks.\nWhen I send a HUP signal to the bot process that triggers a reload of all the command files.  At that point updating a command function definition is just a matter of updating an entry in an array.  No errors and no fuss.  I add new commands and update existing ones without having to ever take down the bot process.  So far this has worked very well.\nIf you want to interact with raifbot join the #uphpu channel on freenode and give a spin.  Remember all of the commands start with $ and the list of supported commands is http://raifbot.wordpress.com/.\nIn addition to raifbot I&#8217;ve started a few other experimental projects.  Some more successful than others.  Though one I started last week I&#8217;m particularly excited about, I&#8217;ll post more on that after I&#8217;ve added a few more features.",
            "date_published": "2011-05-17T14:05:33-06:00",
            "date_modified": "2011-05-17T14:05:33-06:00",
            "authors": [
                {
                    "name": "josephscott",
                    "url": "https://blog.josephscott.org/author/josephscott/",
                    "avatar": "https://secure.gravatar.com/avatar/582b66ad5ae1b69c7601a990cb9a661a?s=512&d=mm&r=g"
                }
            ],
            "author": {
                "name": "josephscott",
                "url": "https://blog.josephscott.org/author/josephscott/",
                "avatar": "https://secure.gravatar.com/avatar/582b66ad5ae1b69c7601a990cb9a661a?s=512&d=mm&r=g"
            },
            "tags": [
                "anonymous-functions",
                "irc",
                "PHP",
                "raifbot",
                "Posts"
            ]
        }
    ]
}