{
    "version": "https://jsonfeed.org/version/1.1",
    "user_comment": "This feed allows you to read the posts from this site in any feed reader that supports the JSON Feed format. To add this feed to your reader, copy the following URL -- https://blog.josephscott.org/tag/makeitlink/feed/json/ -- and add it your reader.",
    "home_page_url": "https://blog.josephscott.org/tag/makeitlink/",
    "feed_url": "https://blog.josephscott.org/tag/makeitlink/feed/json/",
    "language": "en-US",
    "title": "makeitlink &#8211; Joseph Scott",
    "items": [
        {
            "id": "http://josephscott.org/archives/2009/10/makeitlink-update/",
            "url": "https://blog.josephscott.org/2009/10/27/makeitlink-update/",
            "title": "MakeItLink Update",
            "content_html": "<p>With the upcoming release of WordPress 2.9 I thought this would be a good time to re-sync my <a href=\"http://josephscott.org/archives/2008/11/makeitlink-detecting-urls-in-text-and-making-them-links/\">original MakeItLink PHP class</a>.  I went back and did some additional checks with the make_clickable function in WordPress and found a few cases where it wasn&#8217;t generating the expected URL.  That resulted in <a href=\"http://core.trac.wordpress.org/ticket/10990\">ticket #10990</a> and just like before filosofo did a great job of improving my fix.</p>\n<p>After a few rounds of tests (from <a href=\"http://svn.automattic.com/wordpress-tests/wp-testcase/test_includes_formatting.php\">text_includes_formatting.php</a>) the various example strings all worked as expected.  The last diff by filosofo has been committed to -trunk and will be part of WordPress 2.9.</p>\n<p>I expanded my <a href=\"http://josephscott.org/code/php/makeitlink/\">MakeItLink page</a> with an updated version of the code (0.2.0), a basic example and some background.  For those who want to go right into the code it&#8217;s available <a href=\"http://josephscott.org/projects/code/php/makeitlink/makeitlink.php.txt\">here</a>.</p>\n",
            "content_text": "With the upcoming release of WordPress 2.9 I thought this would be a good time to re-sync my original MakeItLink PHP class.  I went back and did some additional checks with the make_clickable function in WordPress and found a few cases where it wasn&#8217;t generating the expected URL.  That resulted in ticket #10990 and just like before filosofo did a great job of improving my fix.\nAfter a few rounds of tests (from text_includes_formatting.php) the various example strings all worked as expected.  The last diff by filosofo has been committed to -trunk and will be part of WordPress 2.9.\nI expanded my MakeItLink page with an updated version of the code (0.2.0), a basic example and some background.  For those who want to go right into the code it&#8217;s available here.",
            "date_published": "2009-10-27T07:01:24-06:00",
            "date_modified": "2009-10-27T07:01:24-06:00",
            "authors": [
                {
                    "name": "josephscott",
                    "url": "https://blog.josephscott.org/author/josephscott/",
                    "avatar": "https://secure.gravatar.com/avatar/582b66ad5ae1b69c7601a990cb9a661a?s=512&d=mm&r=g"
                }
            ],
            "author": {
                "name": "josephscott",
                "url": "https://blog.josephscott.org/author/josephscott/",
                "avatar": "https://secure.gravatar.com/avatar/582b66ad5ae1b69c7601a990cb9a661a?s=512&d=mm&r=g"
            },
            "tags": [
                "makeitlink",
                "PHP",
                "WordPress",
                "Posts"
            ]
        },
        {
            "id": "http://josephscott.org/?p=467",
            "url": "https://blog.josephscott.org/2008/11/28/makeitlink-detecting-urls-in-text-and-making-them-links/",
            "title": "MakeItLink \u2013 Detecting URLs In Text And Making Them Links",
            "content_html": "<p>In late October Jeff Atwood wrote about <a href=\"http://www.codinghorror.com/blog/archives/001181.html\">The Problems With URLs</a>, describing the problems of parsing out URLs in text and transforming them into links.  Here&#8217;s a simple example:</p>\n<blockquote><p>\nMy website is at http://josephscott.org/\n</p></blockquote>\n<p>Would be changed into:</p>\n<blockquote><p>\nMy website is at &lt;a href=&#8217;http://josephscott.org/&#8217;&gt;http://josephscott.org/&lt;/a&gt;\n</p></blockquote>\n<p>Sounds simple right?  Once you start looking at what the valid character set is for URLs things get tricky.  I won&#8217;t rehash all of items, go the <a href=\"http://www.codinghorror.com/blog/archives/001181.html\">The Problem With URLs</a> post to see an example of some of the problems.</p>\n<p>I knew that <a href=\"http://wordpress.org/\">WordPress</a> had a <a href=\"http://trac.wordpress.org/browser/tags/2.6.5/wp-includes/formatting.php#L685\">make_clickable</a> function (in wp-includes/formatting.php) that did this exact thing.  After testing this against some of the problems that Jeff points out it became clear that make_clickable() didn&#8217;t handle these edge cases.  I made some rather crude tweaks to the WordPress code to fix some of these and opened <a href=\"http://trac.wordpress.org/ticket/8300\">ticket 8300</a> with my patches.  Then filosofo came along and not only cleaned up my hacks, but reduced the amount of code needed in general.  Major kudos to filosofo!</p>\n<p>At this point it looks like we&#8217;ve got code to make make_clickable() work correctly with problem URLs.  I&#8217;m going to wait until after WordPress 2.7 is released to push for getting this code committed since we&#8217;re trying to get 2.7 wrapped up.</p>\n<p>I got thinking, this bit of code would be really handy to have as a stand alone library.  So I pulled out the various pieces of code needed to make this work and put it together in a single PHP class: MakeItLink</p>\n<p>[sourcecode language=&#8221;php&#8221;]<br />\nclass MakeItLink {<br />\n    protected function _link_www( $matches ) {<br />\n        $url = $matches[2];<br />\n        $url = MakeItLink::cleanURL( $url );<br />\n        if( empty( $url ) ) {<br />\n            return $matches[0];<br />\n        }</p>\n<p>        return &#8220;{$matches[1]}<a href='{$url}'>{$url}</a>&#8220;;<br />\n    }</p>\n<p>    public function cleanURL( $url ) {<br />\n        if( $url == &#8221; ) {<br />\n            return $url;<br />\n        }</p>\n<p>        $url = preg_replace( &#8220;|[^a-z0-9-~+_.?#=!&amp;;,/:%@$*'()x80-xff]|i&#8221;, &#8221;, $url );<br />\n        $url = str_replace( array( &#8220;%0d&#8221;, &#8220;%0a&#8221; ), &#8221;, $url );<br />\n        $url = str_replace( &#8220;;//&#8221;, &#8220;://&#8221;, $url );</p>\n<p>        /* If the URL doesn&#8217;t appear to contain a scheme, we<br />\n         * presume it needs http:// appended (unless a relative<br />\n         * link starting with / or a php file).<br />\n         */<br />\n        if(<br />\n            strpos( $url, &#8220;:&#8221; ) === false<br />\n            &amp;&amp; substr( $url, 0, 1 ) != &#8220;/&#8221;<br />\n            &amp;&amp; !preg_match( &#8220;|^[a-z0-9-]+?.php|i&#8221;, $url )<br />\n        ) {<br />\n            $url = &#8220;http://{$url}&#8221;;<br />\n        }</p>\n<p>        // Replace ampersans and single quotes<br />\n        $url = preg_replace( &#8220;|&amp;([^#])(?![a-z]{2,8};)|&#8221;, &#8220;&#038;$1&#8221;, $url );<br />\n        $url = str_replace( &#8220;&#8216;&#8221;, &#8220;&#039;&#8221;, $url );</p>\n<p>        return $url;<br />\n    }</p>\n<p>    public function transform( $text ) {<br />\n        $text = &#8221; {$text}&#8221;;</p>\n<p>        $text = preg_replace_callback(<br />\n            &#8216;#(?])(()?([w]+?://(?:[wx80-xff#$%&amp;~/-=?@[](+]|[.,;:](?![s&lt;])|(?(1))(?![s&lt;])|)))*)#is&#039;,<br />\n            array( &#039;MakeItLink&#039;, &#039;_link_www&#039; ),<br />\n            $text<br />\n        );</p>\n<p>        $text = preg_replace( &#039;#(<a>]+?&gt;|&gt;))<a>]+?&gt;([^&gt;]+?)</a></a>#i&#8217;, &#8220;$1$3</a>&#8220;, $text );<br />\n        $text = trim( $text );</p>\n<p>        return $text;<br />\n    }<br />\n}<br />\n[/sourcecode]</p>\n<p>It&#8217;s very easy to use, just load up the text you want to search for link and call the transform method:</p>\n<p>[sourcecode language=&#8221;php&#8221;]<br />\n$text = MakeItLink::transform( $text );<br />\n[/sourcecode]</p>\n<p>All of this code came out of WordPress, which is licensed under the <a href=\"http://www.gnu.org/licenses/old-licenses/gpl-2.0.html\">GPL</a>, so consider the MakeItLink code GPL as well.  If you&#8217;ve got some improvements let me know and make sure that it gets back into the original WordPress functions as well.</p>\n",
            "content_text": "In late October Jeff Atwood wrote about The Problems With URLs, describing the problems of parsing out URLs in text and transforming them into links.  Here&#8217;s a simple example:\n\nMy website is at http://josephscott.org/\n\nWould be changed into:\n\nMy website is at &lt;a href=&#8217;http://josephscott.org/&#8217;&gt;http://josephscott.org/&lt;/a&gt;\n\nSounds simple right?  Once you start looking at what the valid character set is for URLs things get tricky.  I won&#8217;t rehash all of items, go the The Problem With URLs post to see an example of some of the problems.\nI knew that WordPress had a make_clickable function (in wp-includes/formatting.php) that did this exact thing.  After testing this against some of the problems that Jeff points out it became clear that make_clickable() didn&#8217;t handle these edge cases.  I made some rather crude tweaks to the WordPress code to fix some of these and opened ticket 8300 with my patches.  Then filosofo came along and not only cleaned up my hacks, but reduced the amount of code needed in general.  Major kudos to filosofo!\nAt this point it looks like we&#8217;ve got code to make make_clickable() work correctly with problem URLs.  I&#8217;m going to wait until after WordPress 2.7 is released to push for getting this code committed since we&#8217;re trying to get 2.7 wrapped up.\nI got thinking, this bit of code would be really handy to have as a stand alone library.  So I pulled out the various pieces of code needed to make this work and put it together in a single PHP class: MakeItLink\n[sourcecode language=&#8221;php&#8221;]\nclass MakeItLink {\n    protected function _link_www( $matches ) {\n        $url = $matches[2];\n        $url = MakeItLink::cleanURL( $url );\n        if( empty( $url ) ) {\n            return $matches[0];\n        }\n        return &#8220;{$matches[1]}{$url}&#8220;;\n    }\n    public function cleanURL( $url ) {\n        if( $url == &#8221; ) {\n            return $url;\n        }\n        $url = preg_replace( &#8220;|[^a-z0-9-~+_.?#=!&amp;;,/:%@$*'()x80-xff]|i&#8221;, &#8221;, $url );\n        $url = str_replace( array( &#8220;%0d&#8221;, &#8220;%0a&#8221; ), &#8221;, $url );\n        $url = str_replace( &#8220;;//&#8221;, &#8220;://&#8221;, $url );\n        /* If the URL doesn&#8217;t appear to contain a scheme, we\n         * presume it needs http:// appended (unless a relative\n         * link starting with / or a php file).\n         */\n        if(\n            strpos( $url, &#8220;:&#8221; ) === false\n            &amp;&amp; substr( $url, 0, 1 ) != &#8220;/&#8221;\n            &amp;&amp; !preg_match( &#8220;|^[a-z0-9-]+?.php|i&#8221;, $url )\n        ) {\n            $url = &#8220;http://{$url}&#8221;;\n        }\n        // Replace ampersans and single quotes\n        $url = preg_replace( &#8220;|&amp;([^#])(?![a-z]{2,8};)|&#8221;, &#8220;&#038;$1&#8221;, $url );\n        $url = str_replace( &#8220;&#8216;&#8221;, &#8220;&#039;&#8221;, $url );\n        return $url;\n    }\n    public function transform( $text ) {\n        $text = &#8221; {$text}&#8221;;\n        $text = preg_replace_callback(\n            &#8216;#(?])(()?([w]+?://(?:[wx80-xff#$%&amp;~/-=?@[](+]|[.,;:](?![s&lt;])|(?(1))(?![s&lt;])|)))*)#is&#039;,\n            array( &#039;MakeItLink&#039;, &#039;_link_www&#039; ),\n            $text\n        );\n        $text = preg_replace( &#039;#(]+?&gt;|&gt;))]+?&gt;([^&gt;]+?)#i&#8217;, &#8220;$1$3&#8220;, $text );\n        $text = trim( $text );\n        return $text;\n    }\n}\n[/sourcecode]\nIt&#8217;s very easy to use, just load up the text you want to search for link and call the transform method:\n[sourcecode language=&#8221;php&#8221;]\n$text = MakeItLink::transform( $text );\n[/sourcecode]\nAll of this code came out of WordPress, which is licensed under the GPL, so consider the MakeItLink code GPL as well.  If you&#8217;ve got some improvements let me know and make sure that it gets back into the original WordPress functions as well.",
            "date_published": "2008-11-28T09:00:56-07:00",
            "date_modified": "2008-11-28T09:00:56-07:00",
            "authors": [
                {
                    "name": "josephscott",
                    "url": "https://blog.josephscott.org/author/josephscott/",
                    "avatar": "https://secure.gravatar.com/avatar/582b66ad5ae1b69c7601a990cb9a661a?s=512&d=mm&r=g"
                }
            ],
            "author": {
                "name": "josephscott",
                "url": "https://blog.josephscott.org/author/josephscott/",
                "avatar": "https://secure.gravatar.com/avatar/582b66ad5ae1b69c7601a990cb9a661a?s=512&d=mm&r=g"
            },
            "tags": [
                "makeitlink",
                "PHP",
                "WordPress",
                "Posts"
            ]
        }
    ]
}